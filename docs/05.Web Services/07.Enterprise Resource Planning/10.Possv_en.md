---
sidebarDepth: 2
typora-root-url: ./assets
title: Retail Stored Value
date: 2024-02-23 16:52:36
permalink: /pages/cae16a/
---

## Reusable Stored Value Voucher Adjustment

### Fetch Reusable Stored Value Voucher Adjustment List

#### 一、Description

​		 Usage: Fetch Reusable Stored Value Voucher Adjustment List.

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/search/search |
| -------- | -------------------------------------- |
| HTTP Method | GET                                    |
| Encode     | UTF-8                                  |

​		2、URL Parameters

| Parameter             | Type             | Required   | Remarks                                       |
| -------------- | -------------- | ---- | ---------------------------------------- |
| authorization  | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id      | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| stSearch       | String(Query)  | Yes    | poscoreRSVAdjust                         |
| beId           | long(Query)    | Yes    | Business Entity ID                           |
| formatId       | long(Query)    | No    | Lookup Query ID, If not specified, the default format is used. |
| startRow       | int(Query)     | No    | Resultset offset : start index                                 |
| endRow         | int(Query)     | No    | Resultset offset : end index                                 |
| quickSearchStr | String(Query)  | No    | Quick search keyword                              |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/search/search";
		String param = "&stSearch=poscoreRSVAdjust&beId=11";

		HttpGet get = new HttpGet(url + "?" + param);
		get.addHeader("authorization", access_token);
		get.addHeader("client_id", ClientID);
		res = client.execute(get);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));
		}
		get.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}
```

​		4、Response Sample

```json
{
    "stSearch": "poscoreRSVAdjust",
    "size": 1,
    "stSearchDisplay": "Reusable Stored Value Voucher Adjustment",
    "values": [
        {
            "code": "RSVA0001",
            "st_id": 15,
            "st_code": "RSVA0001",
            "st_desc": "RSVA0001",
            "poscoreRSVAdjust.lastModifyUid.simpleUser.desc": "JLTEST",
            "iRev": 1,
            "id": 15,
            "lastModifyDate": "2022-04-17 19:31:27"
        }
    ]
}
```



### Load Reusable Stored Value Voucher Adjustment

#### 一、Description

​		 Usage: Load 【Reusable Stored Value Voucher Adjustment】Record

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/root/api/read/poscoreRSVAdjust |
| -------- | ---------------------------------------- |
| HTTP Method | GET                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| menuCode      | String(Query)  | Yes    | poscoreRSVAdjust                         |
| id            | long(Query)    | Yes    | Reusable Stored Value Voucher Adjustment ID |
| param         | String(Query)  | No    | Extra Pamameters: in JSON format                          |

​		3、Request Sample

```java
		CloseableHttpClient client = HttpClientBuilder.create().build();
		CloseableHttpResponse res = null;
		try {

			String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/root/api/read/poscoreRSVAdjust";
			String param = "&menuCode=poscoreRSVAdjust&id=" + id;

			HttpGet get = new HttpGet(url + "?" + param);
			get.addHeader("authorization", access_token);
			get.addHeader("client_id", ClientID);
			res = client.execute(get);
			if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
				JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

				System.out.println(json);
			}

			get.releaseConnection();
		} catch (Exception e) {
			e.printStackTrace();
		} finally {
			try {
				if (res != null) {
					res.close();
				}
				if (client != null) {
					client.close();
				}
			} catch (Exception ex) {
				ex.printStackTrace();
			}
		}
```

​		4、Response Sample

```json
{
    "data": {
        "poscorersvadjust": [
            {
                "date": 1650124800000,
                "reason": "",
                "attachmentNo": 0,
                "lastModifyUid": 36,
                "code": "RSVA0001",
                "useAccess": false,
                "expiredDate": -2209017600000,
                "iRev": 1,
                "sysJson": "{\"autoGenCode\":{\"snId\":714,\"code\":\"RSVA0001\",\"sn\":\"1\"}}",
                "reason_cth": "",
                "viewCode": "poscoreRSVAdjust",
                "addSVExpDate": 253402185600000,
                "beId": 1,
                "expired": false,
                "reason_zh-CN": "",
                "printCount": 0,
                "useAccessBl": false,
                "id": 15,
                "statusModifyDate": 1650195087000,
                "locked": false,
                "lastModifyDate": 1650195087000,
                "reason_en": "",
                "createUid": 36,
                "createDate": 1650195087000,
                "lastApproveUid": 36,
                "svId": 35,
                "expiredUid": 0,
                "useAccessWl": false,
                "reason_sxg": "",
                "i18nField": "{\"reason_en\": \"\"}",
                "reason_hy": "",
                "reason_jp": "",
                "reason_zh-TW": "",
                "useAccessAutoCalc": false,
                "status": "Y"
            }
        ],
        "poscorersvadjustt": [
            {
                "hId": 15,
                "iRev": 1,
                "itemNo": "     1",
                "svVouId": 1421,
                "ce01Module": "poscoreRSVAdjust",
                "beId": 1,
                "exitExpDate": 253402185600000,
                "newExpDate": 253402185600000,
                "newBal": 1941,
                "exitBal": 1741,
                "adjustment": 200,
                "id": 20,
                "memId": 3
            }
        ]
    },
    "messages": [],
    "status": true
}
```



### Create Reusable Stored Value Voucher Adjustment

#### 一、Description

​		 Usage: create or update 【Reusable Stored Value Voucher Adjustment】

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/root/api/save/poscoreRSVAdjust |
| -------- | ---------------------------------------- |
| HTTP Method | PUT                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| menuCode      | String(Query)  | Yes    | poscoreRSVAdjust                         |
| param         | String(Query)  | No    | Extra Pamameters: in JSON format                          |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/root/api/save/poscoreRSVAdjust";
		String param = "&menuCode=poscoreRSVAdjust";

		HttpPut put = new HttpPut(url + "?" + param);
		put.addHeader("authorization", access_token);
		put.addHeader("client_id", ClientID);

		StringEntity entity = new StringEntity(data.toJSONString(), ContentType.APPLICATION_JSON);
		entity.setContentEncoding("UTF-8");
		put.setEntity(entity);

		res = client.execute(put);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			if (json != null) {
				recordId = json.getLongValue("recordId");
			}

			System.out.println(json);
		}

		put.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}
```

Entity data as JSON format：

```json
{
    "poscorersvadjust": {
        "values": [
            {
                "beId": 1,
                "tDate": "2022-04-15",
                "svId": 35,
                "addSVExpDate": "9999-12-31"
            }
        ]
    },
    "poscorersvadjustt": {
        "values": [
            {
                "exitExpDate": "9999-12-31",
                "newExpDate": "9999-12-31",
                "newBal": 2141,
                "exitBal": 1941,
                "adjustment": 200,
                "svVouId": 1421,
                "memId": 3
            }
        ]
    }
}
```

​		4、Response Sample

```json
{
	"recordId": 16,
	"messages": [],
	"status": true
}
```

```json
{
    "recordId": 0,
    "messages": [
        {
            "msgDetail": "Required field is empty",
            "msgCode": "core_101905"
        }
    ],
    "status": false
}
```



### Delete Reusable Stored Value Voucher Adjustment

#### 一、Description

​		 Usage: Delete Reusable Stored Value Voucher Adjustment

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/root/api/delete/poscoreRSVAdjust |
| -------- | ---------------------------------------- |
| HTTP Method | DELETE                                   |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| menuCode      | String(Query)  | Yes    | poscoreRSVAdjust                         |
| id            | long(Query)    | Yes    | Reusable Stored Value Voucher Adjustment ID |
| param         | String(Query)  | No    | Extra Pamameters: in JSON format                          |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/root/api/delete/poscoreRSVAdjust";
		String param = "&menuCode=poscoreRSVAdjust&id=" + id;

		HttpDelete delete = new HttpDelete(url + "?" + param);
		delete.addHeader("authorization", access_token);
		delete.addHeader("client_id", ClientID);

		res = client.execute(delete);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			System.out.println(json);
		}

		delete.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}
```

​		4、Response Sample

```json
{
	"messages": [],
	"status": true
}
```

```json
{
    "messages": [
        {
            "msgDetail": "Record has been deleted",
            "msgCode": "core_101017"
        }
    ],
    "status": false
}
```









## Member-Tied Stored Value Adjustment

### Fetch Member-Tied Stored Value Adjustment List

#### 一、Description

​		 Usage: Fetch Member-Tied Stored Value Adjustment List.

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/search/search |
| -------- | -------------------------------------- |
| HTTP Method | GET                                    |
| Encode     | UTF-8                                  |

​		2、URL Parameters

| Parameter             | Type             | Required   | Remarks                                       |
| -------------- | -------------- | ---- | ---------------------------------------- |
| authorization  | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id      | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| stSearch       | String(Query)  | Yes    | poscoreMSVAdjust                         |
| beId           | long(Query)    | Yes    | Business Entity ID                           |
| formatId       | long(Query)    | No    | Lookup Query ID, If not specified, the default format is used. |
| startRow       | int(Query)     | No    | Resultset offset : start index                                 |
| endRow         | int(Query)     | No    | Resultset offset : end index                                 |
| quickSearchStr | String(Query)  | No    | Quick search keyword                              |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/search/search";
		String param = "&stSearch=poscoreRSVAdjust&beId=11";

		HttpGet get = new HttpGet(url + "?" + param);
		get.addHeader("authorization", access_token);
		get.addHeader("client_id", ClientID);
		res = client.execute(get);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));
		}
		get.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}
```

​		4、Response Sample

```json
{
    "stSearch": "poscoreMSVAdjust",
    "size": 1,
    "stSearchDisplay": "Member-Tied Stored Value Adjustment",
    "values": [
        {
            "code": "JCAAMTSVA0901",
            "st_id": 2,
            "st_code": "JCAAMTSVA0901",
            "st_desc": "JCAAMTSVA0901",
            "poscoreMSVAdjust.lastModifyUid.simpleUser.desc": "Joseph Chui",
            "iRev": 2,
            "id": 2,
            "lastModifyDate": "2020-09-08 14:37:39"
        }
    ]
}
```



### Load Member-Tied Stored Value Adjustment

#### 一、Description

​		 Usage: Load 【Member-Tied Stored Value Adjustment】Record

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/root/api/read/poscoreMSVAdjust |
| -------- | ---------------------------------------- |
| HTTP Method | GET                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| menuCode      | String(Query)  | Yes    | poscoreMSVAdjust                         |
| id            | long(Query)    | Yes    | Member-Tied Stored Value Adjustment ID   |
| param         | String(Query)  | No    | Extra Pamameters: in JSON format                          |

​		3、Request Sample

```java
		CloseableHttpClient client = HttpClientBuilder.create().build();
		CloseableHttpResponse res = null;
		try {

			String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/root/api/read/poscoreRSVAdjust";
			String param = "&menuCode=poscoreRSVAdjust&id=" + id;

			HttpGet get = new HttpGet(url + "?" + param);
			get.addHeader("authorization", access_token);
			get.addHeader("client_id", ClientID);
			res = client.execute(get);
			if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
				JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

				System.out.println(json);
			}

			get.releaseConnection();
		} catch (Exception e) {
			e.printStackTrace();
		} finally {
			try {
				if (res != null) {
					res.close();
				}
				if (client != null) {
					client.close();
				}
			} catch (Exception ex) {
				ex.printStackTrace();
			}
		}
```

​		4、Response Sample

```json
{
    "data": {
        "poscoremsvadjust": [
            {
                "date": 1599494400000,
                "reason": "",
                "attachmentNo": 0,
                "lastModifyUid": 5,
                "code": "JCAAMTSVA0901",
                "useAccess": false,
                "expiredDate": -2209017600000,
                "iRev": 2,
                "sysJson": "",
                "reason_cth": "",
                "viewCode": "poscoreMSVAdjust",
                "addSVExpDate": 1606665600000,
                "beId": 1,
                "expired": false,
                "reason_zh-CN": "",
                "printCount": 0,
                "useAccessBl": false,
                "id": 2,
                "statusModifyDate": 1599531710000,
                "locked": false,
                "lastModifyDate": 1599547059000,
                "reason_en": "",
                "createUid": 5,
                "createDate": 1599531710000,
                "lastApproveUid": 5,
                "svId": 0,
                "expiredUid": 0,
                "useAccessWl": false,
                "reason_sxg": "",
                "adjBaseOn": "mem",
                "i18nField": "{\"reason_zh-CN\": \"\"}",
                "reason_hy": "",
                "reason_jp": "",
                "reason_zh-TW": "",
                "useAccessAutoCalc": false,
                "status": "Y",
                "memId": 3
            }
        ],
        "poscoremsvadjustt": [
            {
                "beId": 1,
                "hId": 2,
                "newExpDate": 1599494400000,
                "newBal": 85,
                "exitBal": 135,
                "svId": 13,
                "iRev": 2,
                "adjustment": -50,
                "id": 2,
                "itemNo": "     1",
                "ce01Module": "poscoreMSVAdjust",
                "memId": 3
            },
            {
                "beId": 1,
                "hId": 2,
                "newExpDate": 1606665600000,
                "newBal": 315,
                "exitBal": 135,
                "svId": 13,
                "iRev": 2,
                "adjustment": 180,
                "id": 3,
                "itemNo": "     2",
                "ce01Module": "poscoreMSVAdjust",
                "memId": 3
            }
        ]
    },
    "messages": [],
    "status": true
}
```



### Create Member-Tied Stored Value Adjustment

#### 一、Description

​		 Usage: create or update 【Member-Tied Stored Value Adjustment】

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/root/api/save/poscoreMSVAdjust |
| -------- | ---------------------------------------- |
| HTTP Method | PUT                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| menuCode      | String(Query)  | Yes    | poscoreMSVAdjust                         |
| param         | String(Query)  | No    | Extra Pamameters: in JSON format                          |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/root/api/save/poscoreRSVAdjust";
		String param = "&menuCode=poscoreRSVAdjust";

		HttpPut put = new HttpPut(url + "?" + param);
		put.addHeader("authorization", access_token);
		put.addHeader("client_id", ClientID);

		StringEntity entity = new StringEntity(data.toJSONString(), ContentType.APPLICATION_JSON);
		entity.setContentEncoding("UTF-8");
		put.setEntity(entity);

		res = client.execute(put);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			if (json != null) {
				recordId = json.getLongValue("recordId");
			}

			System.out.println(json);
		}

		put.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}
```

Entity data as JSON format：

```json
{
    "poscoremsvadjust": {
        "values": [
            {
                "beId": 1,
                "date": "2022-04-15",
                "adjBaseOn": "sv",
                "svId": 1,
                "addSVExpDate": "9999-12-31"
            }
        ]
    },
    "poscoremsvadjustt": {
        "values": [
            {
                "newExpDate": "9999-12-31",
                "newBal": 2141,
                "exitBal": 1941,
                "adjustment": 200,
                "svVouId": 1421,
                "memId": 3
            }
        ]
    }
}
```

​		4、Response Sample

```json
{
	"recordId": 16,
	"messages": [],
	"status": true
}
```

```json
{
    "recordId": 0,
    "messages": [
        {
            "msgDetail": "Required field is empty",
            "msgCode": "core_101905"
        }
    ],
    "status": false
}
```



### Delete Member-Tied Stored Value Adjustment

#### 一、Description

​		 Usage: Delete Member-Tied Stored Value Adjustment

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/root/api/delete/poscoreMSVAdjust |
| -------- | ---------------------------------------- |
| HTTP Method | DELETE                                   |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| menuCode      | String(Query)  | Yes    | poscoreMSVAdjust                         |
| id            | long(Query)    | Yes    | Member-Tied Stored Value Adjustment ID   |
| param         | String(Query)  | No    | Extra Pamameters: in JSON format                          |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/root/api/delete/poscoreRSVAdjust";
		String param = "&menuCode=poscoreRSVAdjust&id=" + id;

		HttpDelete delete = new HttpDelete(url + "?" + param);
		delete.addHeader("authorization", access_token);
		delete.addHeader("client_id", ClientID);

		res = client.execute(delete);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			System.out.println(json);
		}

		delete.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}
```

​		4、Response Sample

```json
{
	"messages": [],
	"status": true
}
```

```json
{
    "messages": [
        {
            "msgDetail": "Record has been deleted",
            "msgCode": "core_101017"
        }
    ],
    "status": false
}
```



## Member Stored Value Transfer

### Fetch Member Stored Value Transfer List

#### 一、Description

​		 Usage: Fetch Member Stored Value Transfer List.

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/search/search |
| -------- | -------------------------------------- |
| HTTP Method | GET                                    |
| Encode     | UTF-8                                  |

​		2、URL Parameters

| Parameter             | Type             | Required   | Remarks                                       |
| -------------- | -------------- | ---- | ---------------------------------------- |
| authorization  | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id      | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| stSearch       | String(Query)  | Yes    | poscoreSVTransfer                        |
| beId           | long(Query)    | Yes    | Business Entity ID                           |
| formatId       | long(Query)    | No    | Lookup Query ID, If not specified, the default format is used. |
| startRow       | int(Query)     | No    | Resultset offset : start index                                 |
| endRow         | int(Query)     | No    | Resultset offset : end index                                 |
| quickSearchStr | String(Query)  | No    | Quick search keyword                              |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/search/search";
		String param = "&stSearch=poscoreRSVAdjust&beId=11";

		HttpGet get = new HttpGet(url + "?" + param);
		get.addHeader("authorization", access_token);
		get.addHeader("client_id", ClientID);
		res = client.execute(get);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));
		}
		get.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}
```

​		4、Response Sample

```json
{
    "stSearch": "poscoreSVTransfer",
    "size": 1,
    "stSearchDisplay": "Member Stored Value Transfer",
    "values": [
        {
            "code": "MSVT0001",
            "st_id": 12,
            "st_code": "MSVT0001",
            "st_desc": "MSVT0001",
            "poscoreSVTransfer.lastModifyUid.simpleUser.desc": "JLTEST",
            "iRev": 1,
            "id": 12,
            "lastModifyDate": "2022-04-17 21:22:58"
        }
    ]
}
```



### Load Member Stored Value Transfer

#### 一、Description

​		 Usage: Load 【Member Stored Value Transfer】Record

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/root/api/read/poscoreSVTransfer |
| -------- | ---------------------------------------- |
| HTTP Method | GET                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| menuCode      | String(Query)  | Yes    | poscoreSVTransfer                        |
| id            | long(Query)    | Yes    | Member Stored Value Transfer ID          |
| param         | String(Query)  | No    | Extra Pamameters: in JSON format                          |

​		3、Request Sample

```java
		CloseableHttpClient client = HttpClientBuilder.create().build();
		CloseableHttpResponse res = null;
		try {

			String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/root/api/read/poscoreRSVAdjust";
			String param = "&menuCode=poscoreRSVAdjust&id=" + id;

			HttpGet get = new HttpGet(url + "?" + param);
			get.addHeader("authorization", access_token);
			get.addHeader("client_id", ClientID);
			res = client.execute(get);
			if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
				JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

				System.out.println(json);
			}

			get.releaseConnection();
		} catch (Exception e) {
			e.printStackTrace();
		} finally {
			try {
				if (res != null) {
					res.close();
				}
				if (client != null) {
					client.close();
				}
			} catch (Exception ex) {
				ex.printStackTrace();
			}
		}
```

​		4、Response Sample

```json
{
    "data": {
        "poscoresvtransfert": [
            {
                "beId": 1,
                "svtransferred": 500,
                "hId": 12,
                "iRev": 1,
                "id": 12,
                "itemNo": "     1",
                "expDate": 253402185600000,
                "ce01Module": "poscoreSVTransfer"
            }
        ],
        "poscoresvtransfer": [
            {
                "date": 1650124800000,
                "reason": "",
                "attachmentNo": 0,
                "lastModifyUid": 36,
                "code": "MSVT0001",
                "useAccess": false,
                "transto": 119,
                "expiredDate": -2209017600000,
                "iRev": 1,
                "sysJson": "{\"autoGenCode\":{\"snId\":716,\"code\":\"MSVT0001\",\"sn\":\"1\"}}",
                "reason_cth": "",
                "viewCode": "poscoreSVTransfer",
                "beId": 1,
                "expired": false,
                "reason_zh-CN": "",
                "svTransTypeId": 8,
                "printCount": 0,
                "useAccessBl": false,
                "id": 12,
                "statusModifyDate": 1650201778000,
                "locked": false,
                "lastModifyDate": 1650201778000,
                "reason_en": "",
                "createUid": 36,
                "createDate": 1650201778000,
                "lastApproveUid": 36,
                "svId": 1,
                "balancefrom": 241122,
                "transfrom": 3,
                "expiredUid": 0,
                "useAccessWl": false,
                "reason_sxg": "",
                "transfer": 500,
                "i18nField": "{\"reason_en\": \"\"}",
                "reason_hy": "",
                "reason_jp": "",
                "reason_zh-TW": "",
                "useAccessAutoCalc": false,
                "status": "Y",
                "balanceto": 0
            }
        ]
    },
    "messages": [],
    "status": true
}
```



### Create Member Stored Value Transfer

#### 一、Description

​		 Usage: create or update 【Member Stored Value Transfer】

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/root/api/save/poscoreSVTransfer |
| -------- | ---------------------------------------- |
| HTTP Method | PUT                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| menuCode      | String(Query)  | Yes    | poscoreSVTransfer                        |
| param         | String(Query)  | No    | Extra Pamameters: in JSON format                          |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/root/api/save/poscoreRSVAdjust";
		String param = "&menuCode=poscoreRSVAdjust";

		HttpPut put = new HttpPut(url + "?" + param);
		put.addHeader("authorization", access_token);
		put.addHeader("client_id", ClientID);

		StringEntity entity = new StringEntity(data.toJSONString(), ContentType.APPLICATION_JSON);
		entity.setContentEncoding("UTF-8");
		put.setEntity(entity);

		res = client.execute(put);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			if (json != null) {
				recordId = json.getLongValue("recordId");
			}

			System.out.println(json);
		}

		put.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}
```

Entity data as JSON format：

```json
{
    "poscoresvtransfert": {
        "values": [
            {
                "svtransferred": 200,
                "expDate": "9999-12-31"
            }
        ]
    },
    "poscoresvtransfer": {
        "values": [
            {
                "beId": 1,
                "date": "2022-04-15",
                "transfer": 200,
                "transto": 119,
                "svTransTypeId": "8",
                "svId": "1",
                "transfrom": 3
            }
        ]
    }
}
```

​		4、Response Sample

```json
{
	"recordId": 16,
	"messages": [],
	"status": true
}
```

```json
{
    "recordId": 0,
    "messages": [
        {
            "msgDetail": "Required field is empty",
            "msgCode": "core_101905"
        }
    ],
    "status": false
}
```



### Delete Member Stored Value Transfer

#### 一、Description

​		 Usage: Delete Member Stored Value Transfer

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/root/api/delete/poscoreSVTransfer |
| -------- | ---------------------------------------- |
| HTTP Method | DELETE                                   |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| menuCode      | String(Query)  | Yes    | poscoreSVTransfer                        |
| id            | long(Query)    | Yes    | Member Stored Value Transfer ID          |
| param         | String(Query)  | No    | Extra Pamameters: in JSON format                          |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/root/api/delete/poscoreRSVAdjust";
		String param = "&menuCode=poscoreRSVAdjust&id=" + id;

		HttpDelete delete = new HttpDelete(url + "?" + param);
		delete.addHeader("authorization", access_token);
		delete.addHeader("client_id", ClientID);

		res = client.execute(delete);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			System.out.println(json);
		}

		delete.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}
```

​		4、Response Sample

```json
{
	"messages": [],
	"status": true
}
```

```json
{
    "messages": [
        {
            "msgDetail": "Record has been deleted",
            "msgCode": "core_101017"
        }
    ],
    "status": false
}
```





## Load EBI data：Stored Value Voucher Generation Report

#### 一、Description

​		 Usage: Run EBI[Stored Value Voucher Generation Report]，return EBI data

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/ebiWidget/loadReport |
| -------- | ---------------------------------------- |
| HTTP Method | GET                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| formatId      | long(Query)    | Yes    | [Format ID fetched from another API](/pages/b24673/#ebi)         |
| beId          | long(Query)    | No    | Business Entity ID，If not specified, query all authorized Business Entity data.                |
| offset        | int(Query)     | No    | Resultset offset : start index                                 |
| rows          | int(Query)     | No    | Resultset offset : end index                                 |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/ebiWidget/loadReport";
		String param = "&formatId=" + formatId;

		HttpGet get = new HttpGet(url + "?" + param);
		get.addHeader("authorization", access_token);
		get.addHeader("client_id", ClientID);
		res = client.execute(get);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			System.out.println(json);
		}

		get.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}				
```

​		4、Response Sample

```json
{
    "size": 1,
    "rows": [
        {
            "MT_A_id": "26",
            "FT_A_sourceCode": "",
            "MEM_A_id": "0",
            "FT_A_delivered": "No",
            "FT_A_void": "No",
            "M18ReservedCol_dataIndex": 1,
            "MT_A_beId_code": "JC-AA",
            "FT_A_svVouNo": "REDEM_M_371705",
            "MAIN_sourceTypeMess": "",
            "MT_A_beId": "1",
            "FT_A_sourceDate": "",
            "MEM_A_code": "",
            "MT_A_svId_code": "REDEM_M5",
            "MT_A_svId": "16",
            "MT_A_svId_desc__lang": "Redemption Voucher Member Five (Face Value)",
            "MT_A_expDate": "9999 Dec 31",
            "MT_A_code": "219402SV"
        }
    ]
}
```

![ebi1](/assets/erp/sv_ebi_1.jpg)







## Load EBI data：Member Stored Value Transfer Report

#### 一、Description

​		 Usage: Run EBI[Member Stored Value Transfer Report]，return EBI data

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/ebiWidget/loadReport |
| -------- | ---------------------------------------- |
| HTTP Method | GET                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| formatId      | long(Query)    | Yes    | [Format ID fetched from another API](/pages/b24673/#ebi)         |
| beId          | long(Query)    | No    | Business Entity ID，If not specified, query all authorized Business Entity data.                |
| offset        | int(Query)     | No    | Resultset offset : start index                                 |
| rows          | int(Query)     | No    | Resultset offset : end index                                 |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/ebiWidget/loadReport";
		String param = "&formatId=" + formatId;

		HttpGet get = new HttpGet(url + "?" + param);
		get.addHeader("authorization", access_token);
		get.addHeader("client_id", ClientID);
		res = client.execute(get);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			System.out.println(json);
		}

		get.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}				
```

​		4、Response Sample

```json
{
    "size": 1,
    "rows": [
        {
            "MT_A_svTransTypeId_code": "TEST",
            "MT_A_id": "12",
            "MEMTO_A_code": "B",
            "M18ReservedCol_dataIndex": 1,
            "MT_A_beId_code": "JC-AA",
            "FT_A_expDate": "9999 Dec 31",
            "SV_A_id": "1",
            "MEMFROM_A_code": "LH0001",
            "MT_A_beId": "1",
            "MT_A_reason": "",
            "MEMFROM_A_id": "3",
            "MT_A_svTransTypeId": "8",
            "MT_A_transfer": "500",
            "MT_A_date": "2022 Apr 17",
            "FT_A_svtransferred": "500",
            "MT_A_svTransTypeId_desc__lang": "test",
            "SV_A_code": "BP1",
            "MT_A_code": "MSVT0001",
            "MEMTO_A_id": "119"
        }
    ]
}
```

![ebi1](/assets/erp/sv_ebi_2.jpg)







## Load EBI data：Reusable Stored Value Voucher Adjustment Report

#### 一、Description

​		 Usage: Run EBI[Reusable Stored Value Voucher Adjustment Report]，return EBI data

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/ebiWidget/loadReport |
| -------- | ---------------------------------------- |
| HTTP Method | GET                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| formatId      | long(Query)    | Yes    | [Format ID fetched from another API](/pages/b24673/#ebi)         |
| beId          | long(Query)    | No    | Business Entity ID，If not specified, query all authorized Business Entity data.                |
| offset        | int(Query)     | No    | Resultset offset : start index                                 |
| rows          | int(Query)     | No    | Resultset offset : end index                                 |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/ebiWidget/loadReport";
		String param = "&formatId=" + formatId;

		HttpGet get = new HttpGet(url + "?" + param);
		get.addHeader("authorization", access_token);
		get.addHeader("client_id", ClientID);
		res = client.execute(get);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			System.out.println(json);
		}

		get.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}				
```

​		4、Response Sample

```json
{
    "size": 1,
    "rows": [
        {
            "MT_A_id": "16",
            "FT_A_exitExpDate": "9999 Dec 31",
            "FT_A_newBal": "2,141.00",
            "M18ReservedCol_dataIndex": 1,
            "FT_A_exitBal": "1,941.00",
            "MAIN_svVouNo": "RSV2_137240",
            "MT_A_beId_code": "JC-AA",
            "FT_A_adjustment": "200.00",
            "SV_A_id": "35",
            "FT_A_newExpDate": "9999 Dec 31",
            "MT_A_beId": "1",
            "MT_A_date": "2022 Apr 17",
            "SV_A_code": "RSV2",
            "MT_A_code": "RSVA0002",
            "SV_A_unit": "Point"
        }
    ]
}
```

![ebi1](/assets/erp/sv_ebi_3.jpg)





## Load EBI data：Member-Tied Stored Value Adjustment Report

#### 一、Description

​		 Usage: Run EBI[Member-Tied Stored Value Adjustment Report]，return EBI data

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/ebiWidget/loadReport |
| -------- | ---------------------------------------- |
| HTTP Method | GET                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| formatId      | long(Query)    | Yes    | [Format ID fetched from another API](/pages/b24673/#ebi)         |
| beId          | long(Query)    | No    | Business Entity ID，If not specified, query all authorized Business Entity data.                |
| offset        | int(Query)     | No    | Resultset offset : start index                                 |
| rows          | int(Query)     | No    | Resultset offset : end index                                 |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/ebiWidget/loadReport";
		String param = "&formatId=" + formatId;

		HttpGet get = new HttpGet(url + "?" + param);
		get.addHeader("authorization", access_token);
		get.addHeader("client_id", ClientID);
		res = client.execute(get);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			System.out.println(json);
		}

		get.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}				
```

​		4、Response Sample

```json
{
    "size": 1,
    "rows": [
        {
            "MT_A_id": "2",
            "FT_A_newBal": "315.00",
            "MEM_A_id": "3",
            "M18ReservedCol_dataIndex": 1,
            "FT_A_exitBal": "135.00",
            "MT_A_beId_code": "JC-AA",
            "FT_A_adjustment": "180.00",
            "SV_A_id": "13",
            "FT_A_newExpDate": "2020 Nov 30",
            "MT_A_beId": "1",
            "MT_A_reason": "",
            "MEM_A_code": "LH0001",
            "MT_A_adjBaseOn": "Member",
            "MT_A_date": "2020 Sep 08",
            "SV_A_code": "BP3",
            "MT_A_code": "JCAAMTSVA0901",
            "SV_A_unit": "Point"
        }
    ]
}
```

![ebi1](/assets/erp/sv_ebi_4.jpg)





## Load EBI data：Non Voucher Stored Value Balance Report

#### 一、Description

​		 Usage: Run EBI[Non Voucher Stored Value Balance Report]，return EBI data

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/ebiWidget/loadReport |
| -------- | ---------------------------------------- |
| HTTP Method | GET                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| formatId      | long(Query)    | Yes    | [Format ID fetched from another API](/pages/b24673/#ebi)         |
| beId          | long(Query)    | No    | Business Entity ID，If not specified, query all authorized Business Entity data.                |
| offset        | int(Query)     | No    | Resultset offset : start index                                 |
| rows          | int(Query)     | No    | Resultset offset : end index                                 |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/ebiWidget/loadReport";
		String param = "&formatId=" + formatId;

		HttpGet get = new HttpGet(url + "?" + param);
		get.addHeader("authorization", access_token);
		get.addHeader("client_id", ClientID);
		res = client.execute(get);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			System.out.println(json);
		}

		get.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}				
```

​		4、Response Sample

```json
{
    "size": 1,
    "rows": [
        {
            "MEM_A_code": "LH0002",
            "MEM_A_id": "4",
            "M18ReservedCol_dataIndex": 1,
            "BE_A_id": "1",
            "MAIN_svLedger": "83,351.00",
            "SV_A_redemFaceValue": "1.00",
            "SV_A_id": "1",
            "BE_A_code": "JC-AA",
            "SV_A_code": "BP1"
        }
    ]
}
```

![ebi1](/assets/erp/sv_ebi_5.jpg)







## Load EBI data：Non Voucher Stored Value Movement Report

#### 一、Description

​		 Usage: Run EBI[Non Voucher Stored Value Movement Report]，return EBI data

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/ebiWidget/loadReport |
| -------- | ---------------------------------------- |
| HTTP Method | GET                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| formatId      | long(Query)    | Yes    | [Format ID fetched from another API](/pages/b24673/#ebi)         |
| beId          | long(Query)    | No    | Business Entity ID，If not specified, query all authorized Business Entity data.                |
| offset        | int(Query)     | No    | Resultset offset : start index                                 |
| rows          | int(Query)     | No    | Resultset offset : end index                                 |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/ebiWidget/loadReport";
		String param = "&formatId=" + formatId;

		HttpGet get = new HttpGet(url + "?" + param);
		get.addHeader("authorization", access_token);
		get.addHeader("client_id", ClientID);
		res = client.execute(get);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			System.out.println(json);
		}

		get.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}				
```

​		4、Response Sample

```json
{
    "size": 1,
    "rows": [
        {
            "POS_A_code": "20081124",
            "POS_A_id": "1171",
            "MEM_A_id": "18",
            "MAIN_expDate": "9999 Dec 31",
            "M18ReservedCol_dataIndex": 1,
            "BE_A_id": "1",
            "MAIN_svLedger": "1.00",
            "SV_A_id": "1",
            "MAIN_sourceDate": "2020 Aug 03",
            "MAIN_sourceTypeMess": "POS Invoice",
            "POS_A_tDate": "2020 Aug 03 19:02:01",
            "MEM_A_code": "210829MEM",
            "BE_A_code": "JC-AA",
            "SV_A_code": "BP1"
        }
    ]
}
```

![ebi1](/assets/erp/sv_ebi_6.jpg)







## Load EBI data：Stored Value Voucher Balance Report

#### 一、Description

​		 Usage: Run EBI[Stored Value Voucher Balance Report]，return EBI data

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/ebiWidget/loadReport |
| -------- | ---------------------------------------- |
| HTTP Method | GET                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| formatId      | long(Query)    | Yes    | [Format ID fetched from another API](/pages/b24673/#ebi)         |
| beId          | long(Query)    | No    | Business Entity ID，If not specified, query all authorized Business Entity data.                |
| offset        | int(Query)     | No    | Resultset offset : start index                                 |
| rows          | int(Query)     | No    | Resultset offset : end index                                 |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/ebiWidget/loadReport";
		String param = "&formatId=" + formatId;

		HttpGet get = new HttpGet(url + "?" + param);
		get.addHeader("authorization", access_token);
		get.addHeader("client_id", ClientID);
		res = client.execute(get);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			System.out.println(json);
		}

		get.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}				
```

​		4、Response Sample

```json
{
    "size": 1,
    "rows": [
        {
            "MEM_A_code": "",
            "MEM_A_id": "0",
            "M18ReservedCol_dataIndex": 1,
            "BE_A_id": "1",
            "MAIN_svVouNo": "OSV_NM_087135",
            "MAIN_svLedger": "1.00",
            "SV_A_id": "12",
            "BE_A_code": "JC-AA",
            "SV_A_code": "OSV_NM1"
        }
    ]
}
```

![ebi1](/assets/erp/sv_ebi_7.jpg)







## Load EBI data：Stored Value Voucher Ledger Report

#### 一、Description

​		 Usage: Run EBI[Stored Value Voucher Ledger Report]，return EBI data

#### 二、API Detail

​		1、Request URL

| URL      | http://[server]/jsf/rfws/ebiWidget/loadReport |
| -------- | ---------------------------------------- |
| HTTP Method | GET                                      |
| Encode     | UTF-8                                    |

​		2、URL Parameters

| Parameter            | Type             | Required   | Remarks                                       |
| ------------- | -------------- | ---- | ---------------------------------------- |
| authorization | String(Header) | Yes    | [Access Token obtained via Oauth2](/pages/b24673/#generate-access-token) |
| client_id     | String(Header) | Yes    | [Client ID from [OAuth Applications], generated by the aiM18](/pages/b24673/#register-your-app) |
| formatId      | long(Query)    | Yes    | [Format ID fetched from another API](/pages/b24673/#ebi)         |
| beId          | long(Query)    | No    | Business Entity ID，If not specified, query all authorized Business Entity data.                |
| offset        | int(Query)     | No    | Resultset offset : start index                                 |
| rows          | int(Query)     | No    | Resultset offset : end index                                 |

​		3、Request Sample

```java
	CloseableHttpClient client = HttpClientBuilder.create().build();
	CloseableHttpResponse res = null;
	try {

		String url = "http://" + HostIP + ":" + HostPort + "/jsf/rfws/ebiWidget/loadReport";
		String param = "&formatId=" + formatId;

		HttpGet get = new HttpGet(url + "?" + param);
		get.addHeader("authorization", access_token);
		get.addHeader("client_id", ClientID);
		res = client.execute(get);
		if (res.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
			JSONObject json = JSON.parseObject(EntityUtils.toString(res.getEntity()));

			System.out.println(json);
		}

		get.releaseConnection();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		try {
			if (res != null) {
				res.close();
			}
			if (client != null) {
				client.close();
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}				
```

​		4、Response Sample

```json
{
    "size": 1,
    "rows": [
        {
            "MEM_A_code": "",
            "MEM_A_id": "0",
            "MAIN_expDate": "9999 Dec 31",
            "M18ReservedCol_dataIndex": 1,
            "BE_A_id": "1",
            "MAIN_svVouNo": "REDEM_M_289783",
            "MAIN_svLedger": "1.00",
            "MAIN_sourceDate": "2020 Apr 24",
            "MAIN_sourceTypeMess": "POS Invoice",
            "BE_A_code": "JC-AA"
        }
    ]
}
```

![ebi1](/assets/erp/sv_ebi_8.jpg)
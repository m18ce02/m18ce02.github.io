<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Frontend Framework | aiM18 Developer Center</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="Learning in Frontend Framework for ERP system. Browse reference, sample code, tutorials, and more.(aiM18)">
    <meta name="keywords" content="Frontend Framework, ERP, ERP software, ERP system, ERP solution">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.874a5d55.css" as="style"><link rel="preload" href="/assets/js/app.c0adcb3b.js" as="script"><link rel="preload" href="/assets/js/2.60d4b592.js" as="script"><link rel="preload" href="/assets/js/6.7349ea2a.js" as="script"><link rel="prefetch" href="/assets/js/10.4ef70614.js"><link rel="prefetch" href="/assets/js/11.40b4f1d8.js"><link rel="prefetch" href="/assets/js/12.ac2408a4.js"><link rel="prefetch" href="/assets/js/13.78746d91.js"><link rel="prefetch" href="/assets/js/14.b121ec7d.js"><link rel="prefetch" href="/assets/js/15.f65e9e65.js"><link rel="prefetch" href="/assets/js/16.3ab989a0.js"><link rel="prefetch" href="/assets/js/17.5e94362b.js"><link rel="prefetch" href="/assets/js/18.fe32a64f.js"><link rel="prefetch" href="/assets/js/19.d065cb74.js"><link rel="prefetch" href="/assets/js/20.4a82ad20.js"><link rel="prefetch" href="/assets/js/21.48c0a2b3.js"><link rel="prefetch" href="/assets/js/22.234dfe15.js"><link rel="prefetch" href="/assets/js/23.e79ad5ff.js"><link rel="prefetch" href="/assets/js/24.f745f458.js"><link rel="prefetch" href="/assets/js/25.97fcbc87.js"><link rel="prefetch" href="/assets/js/26.24d877e6.js"><link rel="prefetch" href="/assets/js/27.b23fd5d3.js"><link rel="prefetch" href="/assets/js/28.3823617e.js"><link rel="prefetch" href="/assets/js/29.1f676df9.js"><link rel="prefetch" href="/assets/js/3.4f3f893b.js"><link rel="prefetch" href="/assets/js/30.41e05b55.js"><link rel="prefetch" href="/assets/js/31.bda13ed0.js"><link rel="prefetch" href="/assets/js/32.70d14c00.js"><link rel="prefetch" href="/assets/js/33.bc949a04.js"><link rel="prefetch" href="/assets/js/34.46a488fa.js"><link rel="prefetch" href="/assets/js/35.90d111e7.js"><link rel="prefetch" href="/assets/js/36.0ebff776.js"><link rel="prefetch" href="/assets/js/37.0f1a1f00.js"><link rel="prefetch" href="/assets/js/38.575482fe.js"><link rel="prefetch" href="/assets/js/39.9e1e1782.js"><link rel="prefetch" href="/assets/js/4.1ecbfdf7.js"><link rel="prefetch" href="/assets/js/40.335439ea.js"><link rel="prefetch" href="/assets/js/41.d3107211.js"><link rel="prefetch" href="/assets/js/42.7f8d1f29.js"><link rel="prefetch" href="/assets/js/43.c95443c4.js"><link rel="prefetch" href="/assets/js/44.2888a38c.js"><link rel="prefetch" href="/assets/js/45.62145119.js"><link rel="prefetch" href="/assets/js/46.13a9ca18.js"><link rel="prefetch" href="/assets/js/47.219482dc.js"><link rel="prefetch" href="/assets/js/48.1766b41a.js"><link rel="prefetch" href="/assets/js/49.f4ca78f8.js"><link rel="prefetch" href="/assets/js/5.b935706f.js"><link rel="prefetch" href="/assets/js/50.5e3c9136.js"><link rel="prefetch" href="/assets/js/51.4dc87bd1.js"><link rel="prefetch" href="/assets/js/52.171a10b3.js"><link rel="prefetch" href="/assets/js/53.7b30d375.js"><link rel="prefetch" href="/assets/js/54.81656afe.js"><link rel="prefetch" href="/assets/js/55.cca9b1cb.js"><link rel="prefetch" href="/assets/js/56.ded236a0.js"><link rel="prefetch" href="/assets/js/57.656ea847.js"><link rel="prefetch" href="/assets/js/58.ecbcd953.js"><link rel="prefetch" href="/assets/js/59.8b7f3b57.js"><link rel="prefetch" href="/assets/js/60.b3cbf58b.js"><link rel="prefetch" href="/assets/js/61.fba74806.js"><link rel="prefetch" href="/assets/js/62.822dfced.js"><link rel="prefetch" href="/assets/js/63.c394134c.js"><link rel="prefetch" href="/assets/js/64.3087dd35.js"><link rel="prefetch" href="/assets/js/65.2172a35d.js"><link rel="prefetch" href="/assets/js/66.f65e2587.js"><link rel="prefetch" href="/assets/js/67.6fa7a948.js"><link rel="prefetch" href="/assets/js/68.c84d2832.js"><link rel="prefetch" href="/assets/js/69.7ff4b4b6.js"><link rel="prefetch" href="/assets/js/7.280afd54.js"><link rel="prefetch" href="/assets/js/70.48fbb717.js"><link rel="prefetch" href="/assets/js/71.393a4b0e.js"><link rel="prefetch" href="/assets/js/72.7f80169b.js"><link rel="prefetch" href="/assets/js/73.df820547.js"><link rel="prefetch" href="/assets/js/74.bb6d3d21.js"><link rel="prefetch" href="/assets/js/75.bca88166.js"><link rel="prefetch" href="/assets/js/76.f135c37a.js"><link rel="prefetch" href="/assets/js/77.443a00a7.js"><link rel="prefetch" href="/assets/js/78.e725d8f9.js"><link rel="prefetch" href="/assets/js/79.0a19d110.js"><link rel="prefetch" href="/assets/js/8.ec111418.js"><link rel="prefetch" href="/assets/js/9.f644efa6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.874a5d55.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logonav.png" alt="aiM18 Developer Center" class="logo"> <span class="site-name can-hide">aiM18 Developer Center</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">DOC Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="App Development" class="dropdown-title"><a href="/pages/7488ac/" class="link-title">App Development</a> <span class="title" style="display:none;">App Development</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Platform</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7488ac/" class="nav-link">Overview</a></li><li class="dropdown-subitem"><a href="/pages/793dcd/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Frontend Framework</a></li><li class="dropdown-subitem"><a href="/pages/793dce/" class="nav-link">Backend Framework</a></li><li class="dropdown-subitem"><a href="/pages/793dcf/" class="nav-link">EBI Development</a></li><li class="dropdown-subitem"><a href="/pages/793dcg/" class="nav-link">JSF Components</a></li><li class="dropdown-subitem"><a href="/pages/793dch/" class="nav-link">BPM Extension Interface</a></li><li class="dropdown-subitem"><a href="/pages/793dci/" class="nav-link">Telescope Extension Interface</a></li><li class="dropdown-subitem"><a href="/pages/793dcj/" class="nav-link">Mobile App Setup</a></li></ul></li><li class="dropdown-item"><h4>ERP</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1dfab2/" class="nav-link">ERP EJB Interfaces</a></li><li class="dropdown-subitem"><a href="/pages/1dfab3/" class="nav-link">ERP XML Config Files</a></li><li class="dropdown-subitem"><a href="/pages/1dfab4/" class="nav-link">ERP Decorators (Frontend Interfaces)</a></li></ul></li><li class="dropdown-item"><h4>Tutorial</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/793dcc/" class="nav-link">Setup Development Environment</a></li><li class="dropdown-subitem"><a href="/pages/d922fb/" class="nav-link">Sample App</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Integration" class="dropdown-title"><a href="/pages/2ffa7b/" class="link-title">API Integration</a> <span class="title" style="display:none;">API Integration</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Platform</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/2ffa7b/" class="nav-link">Authentication</a></li><li class="dropdown-subitem"><a href="/pages/c42005/" class="nav-link">Common JSON Objects</a></li><li class="dropdown-subitem"><a href="/pages/c79a4a/" class="nav-link">Core Services</a></li><li class="dropdown-subitem"><a href="/pages/dcf49b/" class="nav-link">EBI Services</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/b24673/" class="nav-link">Enterprise Resource Planning</a></li><li class="dropdown-item"><!----> <a href="/pages/fe122f/" class="nav-link">Human Capital Management</a></li><li class="dropdown-item"><!----> <a href="/pages/d34faf/" class="nav-link">Business Process Management</a></li><li class="dropdown-item"><!----> <a href="/pages/48360c/" class="nav-link">Schedule Management</a></li><li class="dropdown-item"><!----> <a href="/pages/c06ace/" class="nav-link">Document Management</a></li><li class="dropdown-item"><h4>Tutorial</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7537af/" class="nav-link">Interacting with aiM18 via webservices</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/pages/7487bc/" class="nav-link">Tutorial</a></div> <a href="https://github.com/m18ce01?tab=repositories" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">DOC Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="App Development" class="dropdown-title"><a href="/pages/7488ac/" class="link-title">App Development</a> <span class="title" style="display:none;">App Development</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Platform</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7488ac/" class="nav-link">Overview</a></li><li class="dropdown-subitem"><a href="/pages/793dcd/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Frontend Framework</a></li><li class="dropdown-subitem"><a href="/pages/793dce/" class="nav-link">Backend Framework</a></li><li class="dropdown-subitem"><a href="/pages/793dcf/" class="nav-link">EBI Development</a></li><li class="dropdown-subitem"><a href="/pages/793dcg/" class="nav-link">JSF Components</a></li><li class="dropdown-subitem"><a href="/pages/793dch/" class="nav-link">BPM Extension Interface</a></li><li class="dropdown-subitem"><a href="/pages/793dci/" class="nav-link">Telescope Extension Interface</a></li><li class="dropdown-subitem"><a href="/pages/793dcj/" class="nav-link">Mobile App Setup</a></li></ul></li><li class="dropdown-item"><h4>ERP</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1dfab2/" class="nav-link">ERP EJB Interfaces</a></li><li class="dropdown-subitem"><a href="/pages/1dfab3/" class="nav-link">ERP XML Config Files</a></li><li class="dropdown-subitem"><a href="/pages/1dfab4/" class="nav-link">ERP Decorators (Frontend Interfaces)</a></li></ul></li><li class="dropdown-item"><h4>Tutorial</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/793dcc/" class="nav-link">Setup Development Environment</a></li><li class="dropdown-subitem"><a href="/pages/d922fb/" class="nav-link">Sample App</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Integration" class="dropdown-title"><a href="/pages/2ffa7b/" class="link-title">API Integration</a> <span class="title" style="display:none;">API Integration</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Platform</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/2ffa7b/" class="nav-link">Authentication</a></li><li class="dropdown-subitem"><a href="/pages/c42005/" class="nav-link">Common JSON Objects</a></li><li class="dropdown-subitem"><a href="/pages/c79a4a/" class="nav-link">Core Services</a></li><li class="dropdown-subitem"><a href="/pages/dcf49b/" class="nav-link">EBI Services</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/b24673/" class="nav-link">Enterprise Resource Planning</a></li><li class="dropdown-item"><!----> <a href="/pages/fe122f/" class="nav-link">Human Capital Management</a></li><li class="dropdown-item"><!----> <a href="/pages/d34faf/" class="nav-link">Business Process Management</a></li><li class="dropdown-item"><!----> <a href="/pages/48360c/" class="nav-link">Schedule Management</a></li><li class="dropdown-item"><!----> <a href="/pages/c06ace/" class="nav-link">Document Management</a></li><li class="dropdown-item"><h4>Tutorial</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7537af/" class="nav-link">Interacting with aiM18 via webservices</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/pages/7487bc/" class="nav-link">Tutorial</a></div> <a href="https://github.com/m18ce01?tab=repositories" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>platform</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7488ac/" class="sidebar-link">Overview</a></li><li><a href="/pages/793dcd/" aria-current="page" class="active sidebar-link">Frontend Framework</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#jsf-page-and-backing-bean" class="sidebar-link">JSF Page and Backing Bean</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#front-end-interaction" class="sidebar-link">Front-end Interaction</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#jsf-interaction" class="sidebar-link">JSF Interaction</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#aim18-interaction" class="sidebar-link">aiM18 Interaction</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#viewlistener" class="sidebar-link">ViewListener</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#interface-description" class="sidebar-link">Interface Description</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#add-viewlistener-to-view" class="sidebar-link">Add ViewListener to View</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#viewlistener-cross-visit" class="sidebar-link">ViewListener Cross Visit</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#viewcontroller" class="sidebar-link">ViewController</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#get-controller" class="sidebar-link">Get Controller</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#support-of-temp-data-in-controller" class="sidebar-link">Support of Temp Data in Controller</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#viewcontroller-viewlistener-hierarchy" class="sidebar-link">ViewController/ViewListener Hierarchy</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#aim18-ui-concept" class="sidebar-link">aiM18 UI Concept</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#udf-screen-layout" class="sidebar-link">UDF Screen Layout</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#introduction-of-fluidpanel" class="sidebar-link">Introduction of fluidPanel</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#rules-of-layout" class="sidebar-link">Rules of Layout</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#component-implementation-rules" class="sidebar-link">Component Implementation Rules</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#include-resources-in-jsf-page" class="sidebar-link">Include Resources in JSF Page</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#frame-development" class="sidebar-link">Frame Development</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#frame-and-module" class="sidebar-link">Frame and Module</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#frame-template" class="sidebar-link">Frame Template</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#frame-events" class="sidebar-link">Frame Events</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#javascript-events" class="sidebar-link">JavaScript Events</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#java-events" class="sidebar-link">Java Events</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#module-events" class="sidebar-link">Module Events</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#javascript-events-2" class="sidebar-link">JavaScript Events</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#java-events-2" class="sidebar-link">Java Events</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#dialog-development" class="sidebar-link">Dialog Development</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#prompt-the-dialog" class="sidebar-link">Prompt the Dialog</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#using-javascript" class="sidebar-link">Using JavaScript</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#using-java" class="sidebar-link">Using Java</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#cawdialog-object-and-dialog-s-setting" class="sidebar-link">CawDialog Object and Dialog's Setting</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#cawdialog-object" class="sidebar-link">CawDialog Object</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#dialog-s-setting" class="sidebar-link">Dialog's Setting</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#dialog-close-and-callback" class="sidebar-link">Dialog Close and Callback</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#dialog-close" class="sidebar-link">Dialog Close</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#dialog-callback" class="sidebar-link">Dialog Callback</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#messaging-mechanism" class="sidebar-link">Messaging Mechanism</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#introduction-2" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#message-classification" class="sidebar-link">Message Classification</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#message-center" class="sidebar-link">Message Center</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#define-detail-view-in-javascript" class="sidebar-link">Define Detail View in JavaScript</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#define-detail-view-in-java" class="sidebar-link">Define Detail View in Java</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#self-defined-messages" class="sidebar-link">Self Defined Messages</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#namecard-development" class="sidebar-link">Namecard Development</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#namecard-trigger" class="sidebar-link">Namecard Trigger</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#create-namecard" class="sidebar-link">Create Namecard</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#namecard-data" class="sidebar-link">Namecard Data</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#namecard-template" class="sidebar-link">Namecard Template</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#namecard-template-development" class="sidebar-link">Namecard Template Development</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#udf-namecard" class="sidebar-link">UDF Namecard</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#development" class="sidebar-link">Development</a></li><li class="sidebar-sub-header level5"><a href="/pages/793dcd/#registration" class="sidebar-link">Registration</a></li><li class="sidebar-sub-header level5"><a href="/pages/793dcd/#template-view" class="sidebar-link">Template View</a></li><li class="sidebar-sub-header level5"><a href="/pages/793dcd/#namecard-setting-editor" class="sidebar-link">Namecard Setting Editor</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#shortcut-development" class="sidebar-link">Shortcut Development</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#introduction-3" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#using-shortcut-in-components" class="sidebar-link">Using Shortcut in Components</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#using-shortcut-in-editor" class="sidebar-link">Using Shortcut in Editor</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#using-shortcut-in-javascript" class="sidebar-link">Using shortcut in JavaScript</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#alert-development" class="sidebar-link">Alert Development</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#introduction-4" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#alert-implementation" class="sidebar-link">Alert Implementation</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#alert-development-2" class="sidebar-link">Alert Development</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#define-alert-java-object" class="sidebar-link">Define Alert Java Object</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#define-the-alert-view-renderer" class="sidebar-link">Define the Alert View Renderer</a></li><li class="sidebar-sub-header level5"><a href="/pages/793dcd/#note" class="sidebar-link">Note</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#register-the-java-object-and-renderer" class="sidebar-link">Register the JAVA Object and Renderer</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#link-s-rules" class="sidebar-link">Link's Rules</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#introduction-5" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#get-the-system-link" class="sidebar-link">Get the System Link</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#about-link-s-parameters" class="sidebar-link">About Link's Parameters</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#use-of-push" class="sidebar-link">Use of PUSH</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#front-end" class="sidebar-link">Front-end</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#backend" class="sidebar-link">Backend</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#example" class="sidebar-link">Example</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#common-api" class="sidebar-link">Common API</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#home-s-components-development" class="sidebar-link">Home's Components Development</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#spotlight-component" class="sidebar-link">Spotlight Component</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#searching" class="sidebar-link">Searching</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#search-result-display" class="sidebar-link">Search Result Display</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#spotlight-registration" class="sidebar-link">Spotlight Registration</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#widget-component" class="sidebar-link">Widget Component</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#display-view" class="sidebar-link">Display View</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#setting-view" class="sidebar-link">Setting View</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#registration-2" class="sidebar-link">Registration</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#theme-development" class="sidebar-link">Theme Development</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#introduction-6" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#type-of-theme" class="sidebar-link">Type of Theme</a></li><li class="sidebar-sub-header level5"><a href="/pages/793dcd/#user-definded" class="sidebar-link">User Definded</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#create-modify-theme-css-file" class="sidebar-link">Create/Modify Theme CSS File</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#naming-and-path-rules" class="sidebar-link">Naming and Path Rules</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#how-to-writing-a-css-file" class="sidebar-link">How to Writing a CSS File</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#predefined-variables" class="sidebar-link">Predefined Variables</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#adding-a-theme" class="sidebar-link">Adding a Theme</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#supporting-udf-theme-in-editor" class="sidebar-link">Supporting UDF Theme in Editor</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#registration-3" class="sidebar-link">Registration</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#create-use-of-css-file" class="sidebar-link">Create/Use of CSS File</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#create-demo-page" class="sidebar-link">Create Demo Page</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#extension-of-existing-functions" class="sidebar-link">Extension of Existing Functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#extension-of-editor" class="sidebar-link">Extension of Editor</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#registration-of-extension" class="sidebar-link">Registration of Extension</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#extension-of-tags-adding-a-new-component" class="sidebar-link">Extension of Tags &amp; Adding a New Component</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#extend-modify-component-s-attributes" class="sidebar-link">Extend/Modify Component's Attributes</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#decorator" class="sidebar-link">Decorator</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#introduction-7" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#define-a-decorator" class="sidebar-link">Define a decorator</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#enable-a-decorator" class="sidebar-link">Enable a Decorator</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#use-of-decorator-in-extension-prospect" class="sidebar-link">Use of Decorator in Extension Prospect</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#create-a-new-component" class="sidebar-link">Create a New Component</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#support-udf-mess" class="sidebar-link">Support UDF Mess</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#support-locator" class="sidebar-link">Support Locator</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#support-udf-functions" class="sidebar-link">Support UDF Functions</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#support-udf-fields" class="sidebar-link">Support UDF Fields</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#support-udf-attributes" class="sidebar-link">Support UDF Attributes</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#setting-for-component" class="sidebar-link">Setting for Component</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#how-to-use-the-udf-attribute-in-component" class="sidebar-link">How To Use the UDF Attribute In Component</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#special-components-features" class="sidebar-link">Special Components/Features</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#module-wizard" class="sidebar-link">Module Wizard</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#enable-wizard" class="sidebar-link">Enable Wizard</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#create-a-wizard" class="sidebar-link">Create a Wizard</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#progress-bar" class="sidebar-link">Progress Bar</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#introduction-8" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#create-destory" class="sidebar-link">Create &amp; Destory</a></li><li class="sidebar-sub-header level5"><a href="/pages/793dcd/#create-default-progress-bar" class="sidebar-link">Create Default Progress Bar</a></li><li class="sidebar-sub-header level5"><a href="/pages/793dcd/#create-udf-progress-bar" class="sidebar-link">Create UDF Progress Bar</a></li><li class="sidebar-sub-header level5"><a href="/pages/793dcd/#enable-the-progress-bar" class="sidebar-link">Enable the Progress Bar</a></li><li class="sidebar-sub-header level5"><a href="/pages/793dcd/#destory-the-progress-bar" class="sidebar-link">Destory the Progress Bar</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#update-the-progress-bar" class="sidebar-link">Update the Progress Bar</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#progress-bar-common-api" class="sidebar-link">Progress Bar Common API</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#multilingual" class="sidebar-link">Multilingual</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/793dcd/#common-api-2" class="sidebar-link">Common API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#jsf-view-common-setting" class="sidebar-link">JSF View Common Setting</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#available-configuration-items" class="sidebar-link">Available Configuration Items</a></li><li class="sidebar-sub-header level4"><a href="/pages/793dcd/#common-function" class="sidebar-link">Common Function</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#java-common-front-end-api" class="sidebar-link">Java Common Front-end API</a></li><li class="sidebar-sub-header level3"><a href="/pages/793dcd/#javascript-common-api" class="sidebar-link">Javascript Common API</a></li></ul></li></ul></li><li><a href="/pages/793dce/" class="sidebar-link">Backend Framework</a></li><li><a href="/pages/793dcf/" class="sidebar-link">EBI Development</a></li><li><a href="/pages/793dcg/" class="sidebar-link">JSF Components</a></li><li><a href="/pages/793dch/" class="sidebar-link">BPM Extension Interface</a></li><li><a href="/pages/793dci/" class="sidebar-link">Telescope Extension Interface</a></li><li><a href="/pages/793dcj/" class="sidebar-link">Mobile App Setup</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>erp</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/1dfab2/" class="sidebar-link">ERP EJB Interfaces</a></li><li><a href="/pages/1dfab3/" class="sidebar-link">ERP XML Config Files</a></li><li><a href="/pages/1dfab4/" class="sidebar-link">ERP Decorators (Frontend Interfaces)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>tutorial</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/793dcc/" class="sidebar-link">Setup Development Environment</a></li><li><a href="/pages/d922fb/" class="sidebar-link">Sample App</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>App</span></li><li data-v-06225672><span data-v-06225672>platform</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/m18ce01" target="_blank" title="作者" class="beLink" data-v-06225672>Multiable</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-01-09</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Frontend Framework<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p><code>Version: 1.2 | Release Date: 30/01/2024</code></p> <p>aiM18 front-end development is based on JSF (Java Server Faces)</p> <p>The core concept in JSF is &quot;component&quot;, a web page is rendered by a tree of &quot;components&quot;, each component get its back-end value from EL Expression and show them in page; Update values input by user in front-end to back-end application server.</p> <h2 id="jsf-page-and-backing-bean"><a href="#jsf-page-and-backing-bean" class="header-anchor">#</a> JSF Page and Backing Bean</h2> <h3 id="front-end-interaction"><a href="#front-end-interaction" class="header-anchor">#</a> Front-end Interaction</h3> <h4 id="jsf-interaction"><a href="#jsf-interaction" class="header-anchor">#</a> JSF Interaction</h4> <p>JSF interaction with back-end, no matter it is for value binding or event feedback, it is done via EL Expression. JSF components in page bind with bean in the back-end through EL Expression, the relation between JSF page and backing bean is shown below:</p> <p><img src="/assets/jsfelbean.jpg" alt="jsfelbean"></p> <h4 id="aim18-interaction"><a href="#aim18-interaction" class="header-anchor">#</a> aiM18 Interaction</h4> <p>In aiM18, all JSF interaction mechanism is preserved, and support another type of interaction:</p> <p><img src="/assets/m18listener.jpg" alt="m18listener"></p> <p>In aiM18, every view (JSF page) got a ViewController, which responsible for events distribution. For view, there can be multiple ViewListeners listening events triggered by ViewControllers and respond to it.</p> <blockquote><p><strong>Attention</strong>:</p> <ul><li>View and back-end data binding, can only done via JavaBean and Controller, view and JavaBean can use EL expression to do data binding. While via Controller can bind some temporary data, for details please refer to <a href="#support-of-temp-data-in-controller">Support of Temp Data in Controller</a></li> <li>ViewListener listen to events only, and respond to them</li> <li>In general, one view, one JavaBean, but many ViewListeners</li></ul></blockquote> <h3 id="viewlistener"><a href="#viewlistener" class="header-anchor">#</a> ViewListener</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ViewListener</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">controllerInitialized</span><span class="token punctuation">(</span><span class="token class-name">ViewController</span> controller<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// for input</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">validateValue</span><span class="token punctuation">(</span><span class="token class-name">ValidateEvent</span> ve<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">valueChange</span><span class="token punctuation">(</span><span class="token class-name">ValueChangeEvent</span> vce<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// for action</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">actionPerformed</span><span class="token punctuation">(</span><span class="token class-name">ViewActionEvent</span> vae<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// for dialog</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dialogCallback</span><span class="token punctuation">(</span><span class="token class-name">ViewActionEvent</span> vae<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// for lookup</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">lookupParameter</span><span class="token punctuation">(</span><span class="token class-name">LookupDecorateEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">lookupData</span><span class="token punctuation">(</span><span class="token class-name">LookupDecorateEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="interface-description"><a href="#interface-description" class="header-anchor">#</a> Interface Description</h4> <table><thead><tr><th>Method</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>getKey</td> <td>No</td> <td>The key of listener in a view, used to identify a listener in a view by another listener. For details please refer to <a href="#viewlistener-cross-visit">ViewListener Cross Visit</a>.</td></tr> <tr><td>controllerInitialized</td> <td>Yes</td> <td>Triggered when ViewController is initialized. Can be used to initialize data.</td></tr> <tr><td>validateValue</td> <td>Yes</td> <td>This method is triggered when the value of component is submitted to validate the input value, <code>false</code> means validation failed.</td></tr> <tr><td>valueChange</td> <td>Yes</td> <td>It is triggered after value is validated, and back-end model is updated, used to update other model's values based on the changed value.</td></tr> <tr><td>actionPerformed</td> <td>Yes</td> <td>Used to respond to events submitted by front-end components. For example, <code>commandButton</code> click event, <code>inputText</code> focus, blur, change event.</td></tr> <tr><td>dialogCallback</td> <td>Yes</td> <td>To handle current view's dialog callback event, for details please refer to <a href="#dialog-callback">Dialog Callback Method</a>.</td></tr> <tr><td>lookupParameter</td> <td>No</td> <td>It is called before the lookup data is retrieved from database. It allows developers to add conditions/parameters to specific lookup fields in the page.</td></tr> <tr><td>lookupData</td> <td>No</td> <td>It is triggered after lookup data read, and before the data is presented to end-user. Allow developers to modify the final returned lookup data.</td></tr></tbody></table> <p><strong>Example</strong>：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Examples</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">validateValue</span><span class="token punctuation">(</span><span class="token class-name">ValidateEvent</span> ve<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">String</span> id <span class="token operator">=</span> ve<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span>ve<span class="token punctuation">.</span><span class="token function">getNewValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">valueChange</span><span class="token punctuation">(</span><span class="token class-name">ValueChangeEvent</span> vce<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">String</span> id <span class="token operator">=</span> vce<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Code is changed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">actionPerformed</span><span class="token punctuation">(</span><span class="token class-name">ViewActionEvent</span> vae<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> actionCommand <span class="token operator">=</span> vae<span class="token punctuation">.</span><span class="token function">getActionCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// String id = vae.getComponent().getId();</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;ok&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>actionCommand<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Ok button is clicked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lookupParameter</span><span class="token punctuation">(</span><span class="token class-name">LookupDecorateEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">StParameter</span> param <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">StParameter</span><span class="token punctuation">)</span> event<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token comment">//String componentId = event.getComponentId();  // If you want to know the UI component</span>
  	param<span class="token punctuation">.</span><span class="token function">setStSearch</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lookupData</span><span class="token punctuation">(</span><span class="token class-name">LookupDecorateEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SqlTable</span> data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SqlTable</span><span class="token punctuation">)</span> event<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	data<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;desc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;modified by listener&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>Attention</strong>：</p> <ul><li><p>All actions, including <code>commandButton</code>, and actions added by <code>ajax</code> in front-end, will respond via <code>actionPerformed</code>. Developers use <code>ViewActionEvent</code> to get component and <code>ajax</code> info.</p></li> <li><p><code>actionCommand</code> can be used to distinguish the event triggered in <code>actionPerformed</code>.  Use <code>ViewActionEvent.getActionCommand()</code> to get the <code>actionCommand</code> in JavaBean.</p></li></ul></blockquote> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>commandButton</span> <span class="token attr-name">actionCommand</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>ajax</span> <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span> <span class="token attr-name">actionCommand</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="add-viewlistener-to-view"><a href="#add-viewlistener-to-view" class="header-anchor">#</a> Add ViewListener to View</h4> <p>Developers can add ViewListeners to a view by the following ways:</p> <ol><li>Simple ViewListener class (not Java Bean), simply add in navmenu.xml:</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>menu</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>com.multiable.bean.view.ModuleViewListenerTest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>com.multiable.bean.view.ModuleViewListenerTest2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>menu</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>For Java Bean's ViewListener, can declare in JSF page directly:</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>body</span><span class="token punctuation">&gt;</span></span>
  		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>beanDeclare</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>beanDeclare</span><span class="token punctuation">&gt;</span></span>
  		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>body</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>In JSF page, add listener class:</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>viewListener</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.bean.view.ModuleViewListenerTest<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><ol start="4"><li>In Bean, declare a new ViewListener, and bind it in JSF page:</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>viewListener</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{employeeBean.listener}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>   <span class="token comment">// EmployeeBean.java</span>
   <span class="token keyword">public</span> <span class="token class-name">ViewListener</span> <span class="token function">getListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ModuleViewListenerTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
</code></pre></div><h4 id="viewlistener-cross-visit"><a href="#viewlistener-cross-visit" class="header-anchor">#</a> ViewListener Cross Visit</h4> <p>Inside ViewListener, if you want to access another ViewListener in the current View, you must know the key of another ViewListener that corresponds to the getKey () interface in the ViewListener.</p> <p>The default value for key is the className of ViewListener. Modify the ViewListener instance by loading getKey ().</p> <p>In ViewListener, other ViewListener instances can be obtained from the following code (this does not include the ViewListener in the form of a JavaBean because you can call other Java Beans directly through injection):</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ViewListener</span><span class="token punctuation">[</span><span class="token punctuation">]</span> listeners <span class="token operator">=</span> controller<span class="token punctuation">.</span><span class="token function">getViewListener</span><span class="token punctuation">(</span>listenerKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="viewcontroller"><a href="#viewcontroller" class="header-anchor">#</a> ViewController</h3> <h4 id="get-controller"><a href="#get-controller" class="header-anchor">#</a> Get Controller</h4> <ul><li>To get ViewController of current View in ViewListener, developers can:</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token class-name">ViewController</span> controller <span class="token operator">=</span> <span class="token class-name">CawBeanUtil</span><span class="token punctuation">.</span><span class="token function">getViewController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>For JavaBean's ViewListener, which extends <code>ViewBean</code>, <code>ModuleBean</code> or other ViewListener that extends <code>ViewListenerBase</code>,  developers can use <code>controller</code>to get the controller object.</li></ul> <h4 id="support-of-temp-data-in-controller"><a href="#support-of-temp-data-in-controller" class="header-anchor">#</a> Support of Temp Data in Controller</h4> <p>If you need to bind some non-persistent variables in View through EL expressions, you can set variables through the controller without adding new variables and corresponding set / get interfaces to the Java Bean. This action can be done in all ViewListener.</p> <ul><li>Setup variable values</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  controller<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Serializable</span> value<span class="token punctuation">)</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>  controller<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  controller<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  controller<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Get variable values</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  controller<span class="token punctuation">.</span><span class="token function">getVariable</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>  <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> controller<span class="token punctuation">.</span><span class="token function">getVariable</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> controller<span class="token punctuation">.</span><span class="token function">getVariable</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Date</span> createTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">)</span> controller<span class="token punctuation">.</span><span class="token function">getVariable</span><span class="token punctuation">(</span><span class="token string">&quot;createTime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="viewcontroller-viewlistener-hierarchy"><a href="#viewcontroller-viewlistener-hierarchy" class="header-anchor">#</a> ViewController/ViewListener Hierarchy</h3> <p><img src="/assets/controllers.jpg" alt="controllers"></p> <blockquote><p><strong>Attention</strong>：</p> <ul><li>Every View got a ViewController, the controller can be one of the above controller objects.</li> <li>Any ViewListener can be added to any View, but different ViewListener interfaces contain specific methods that will only work in some specific ViewController.</li> <li>For View classification and its corresponding ViewController, pls refer to <a href="#aim18-ui-concept">aiM18 UI Concept</a>.</li></ul></blockquote> <h2 id="aim18-ui-concept"><a href="#aim18-ui-concept" class="header-anchor">#</a> aiM18 UI Concept</h2> <p>The aiM18 platform runs in a browser window. The documents and modules in the aiM18 platform are displayed as tabs in the aiM18 browser window.</p> <ul><li>aiM18 browser window view, called &quot;App View&quot;</li> <li>In &quot;App View&quot;, the view displayed as a tab is called &quot;Frame View&quot;</li> <li>In &quot;App View&quot;, a pop-up window is called &quot;Dialog view&quot;</li> <li>In &quot;App View&quot;, the small floating window that used to display additional information of a lookup field is called &quot;Name card (Namecard view)</li> <li>All views have a separate view file (JSF file, xhtml format)</li></ul> <p><strong>App View</strong></p> <p><img src="/assets/homeui.jpg" alt="homeui"></p> <p><strong>Frame View</strong></p> <p><img src="/assets/frameui.jpg" alt="frameui"></p> <p><strong>Dialog View</strong></p> <p><img src="/assets/dialogui.jpg" alt="dialogui"></p> <p><strong>Namecard View</strong></p> <p><img src="/assets/namecardui.jpg" alt="namecardui"></p> <p><strong>Module View</strong></p> <p>Same as Frame View. Module is only a special type of Frame View, it is a frame view which the data binded with back-end module data.</p> <h3 id="udf-screen-layout"><a href="#udf-screen-layout" class="header-anchor">#</a> UDF Screen Layout</h3> <p>Frame View supports end-user level of self defined layout.</p> <p>aiM18 uses <code>fluidPanel</code> component to implement the UDF screen layout function.</p> <h3 id="introduction-of-fluidpanel"><a href="#introduction-of-fluidpanel" class="header-anchor">#</a> Introduction of <code>fluidPanel</code></h3> <p><code>fluidPanel</code> component is a layout component provided by aiM18, it is based on bootstrap 12 grids system.</p> <p><strong><code>fluidPanel</code>main attribute</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>column</td> <td><code>int</code></td> <td>Define the no. of columns in the layout, must be a factors of 12, recommend to use 1, 2, 3 or 4.</td></tr></tbody></table> <p>More attributes' detail can be found in: <a href="/pages/793dcg/#fluidpanel">aiM18 JSF Component</a></p> <p><strong>Layout Properties of Components in <code>fluidPanel</code></strong></p> <p>The components in <code>fluidPanel</code> use tag <code>constraints</code> (namespace = <code>http://www.cloud-at-work.com</code>) to set layout properties, like below:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xhtml<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>caw</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.cloud-at-work.com<span class="token punctuation">&quot;</span></span><span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>fluidPanel</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layoutPanel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>constraints</span> <span class="token attr-name">colSpan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>constraints</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>imgUpload</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>constraints</span> <span class="token attr-name">rowSpan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>constraints</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>imgUpload</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>fluidPanel</span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong><code>constraints</code>main attributes</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>rowSpan</td> <td><code>int</code></td> <td>Row span of the component</td></tr> <tr><td>colSpan</td> <td><code>int</code></td> <td>Column span of the component</td></tr> <tr><td>newLine</td> <td><code>boolean</code></td> <td>Component will start in a new row</td></tr> <tr><td>rowFill</td> <td><code>boolean</code></td> <td>Component will fill the remaining space in current row</td></tr> <tr><td>rowHold</td> <td><code>boolean</code></td> <td>Component will occupy whole row, if there is other components in current row, the component will start in a new row</td></tr> <tr><td>styleClass</td> <td><code>String</code></td> <td>Set <code>class</code> for the <code>DIV</code> of the component</td></tr> <tr><td>style</td> <td><code>String</code></td> <td>Set <code>style</code> for the <code>DIV</code> of the component</td></tr></tbody></table> <h3 id="rules-of-layout"><a href="#rules-of-layout" class="header-anchor">#</a> Rules of Layout</h3> <p>Developer must follow the below rules, if they want their frame view to support UDF Screen Layout:</p> <ul><li>Use<code>fluidPanel</code> component to do layout.</li> <li>Only direct child components of <code>fluidPanel</code>can be involved in UDF screen layout.</li> <li><code>fluidPanel</code>components and all components in the <code>fluldPanel</code>, must have an ID, and the ID must be <strong>unique</strong> in the view.</li></ul> <p>Advise to developers：</p> <ul><li>Do not use <code>fluidPanel</code> recursively:</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>fluidPanel</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layout<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>fluidPanel</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nest<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>fluidPanel</span><span class="token punctuation">&gt;</span></span>
    ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>fluidPanel</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><p>For Relatively fixed positioned component, do not directly put it under <code>fluidPanel</code>.</p></li> <li><p>If you expect some components to be placed under the <code>fluidPanel</code> as a whole, you can use other layout-related components, encapsulate these components, and place them under the <code>fluidPanel</code>. Layout-related components are <code>fieldGroup</code>, <code>container</code>.</p></li></ul> <h3 id="component-implementation-rules"><a href="#component-implementation-rules" class="header-anchor">#</a> Component Implementation Rules</h3> <ol><li><p><strong>ID must be filled, and must be unique</strong></p> <ul><li>aiM18 interface allow 3PD to extend and develop, and 3PD need the ID to do the extension like adding new fields in an editor.</li> <li>In order to support UDF screen layout, components must have ID.</li> <li><code>clientId</code> is needed when developers want to find/update the components, however, <code>clientId</code> is auto generated by the system and will be changed every time user opened an browser. this greatly increase the maintenance costs. Therefore, aiM18 provides an alternative to get the component based on a fixed component ID.</li></ul></li> <li><p>Layout using <code>fluidPanel</code>, a page can be divided into different region, each region uses <code>fluldPanel</code> to do layout.</p></li> <li><p>In the module, the page's components is mapped with the back-end data by specifying the <code>tableName</code> and <code>columnName</code>. Component ID can be generated accordingly.</p> <p>In general, the <code>id</code> can be set and data can be binded in the component using the following snippet:</p></li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{xxxBean.textValue}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>In module view, data can be binded in this way:</p> <div class="language-xml extra-class"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxTable<span class="token punctuation">&quot;</span></span> <span class="token attr-name">columnName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyColumn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>For component that with <code>tableName</code> and <code>columnName</code> filled,  it will auto bind to back-end's entity, and the <code>id</code> will be auto generated(id = <code>tableName</code>_<code>columnName</code>).</p> <h3 id="include-resources-in-jsf-page"><a href="#include-resources-in-jsf-page" class="header-anchor">#</a> Include Resources in JSF Page</h3> <p>In all view files, you only need to import the <strong>specific</strong> css/js resources for the current view. System-wide resources will be automatically loaded.</p> <p>Automatically loaded resources include:</p> <p><code>jquery.js</code>、<code>tether.js</code>、<code>bootstrap.js</code>、<code>cawView.js</code>、<code>bootstrap.css</code>、<code>cawStyle.css</code>、<code>cawTheme.css</code>, etc.</p> <h2 id="frame-development"><a href="#frame-development" class="header-anchor">#</a> Frame Development</h2> <h3 id="frame-and-module"><a href="#frame-and-module" class="header-anchor">#</a> Frame and Module</h3> <blockquote><p><strong>Frame</strong> is defined in <code>navmenu.xml</code>, showing as a &quot;Tab&quot; in App View, one can click the menu to enter the Frame View</p></blockquote> <blockquote><p><strong>Module</strong> means frame that has back-end data binding.</p></blockquote> <p>Controller of <strong>Frame View</strong> is <code>FrameController</code>， event listener is <code>ViewListener</code></p> <p>Controller of <strong>Module View</strong> is <code>ModuleController</code>， event listener is <code>ModuleViewListener</code></p> <h3 id="frame-template"><a href="#frame-template" class="header-anchor">#</a> Frame Template</h3> <p>aiM18 provides an unified frame template to simplify coding of frame page.</p> <p>The template includes four parts:</p> <blockquote><ul><li><p><code>searchView</code>: navigating records</p> <p>Provide a default implementation; 3PD can override.</p></li> <li><p><code>contentView</code>: show record data</p> <p>Can be fully implemented by 3PD.</p></li> <li><p><code>toolbar</code>: put various operations function buttons</p> <p>Provide a default implementation; 3PD can override.</p></li> <li><p><code>additionView</code>: show additional info of the record</p> <p>Provide a default implementation; 3PD can override.</p></li></ul></blockquote> <p><img src="/assets/moduletemplate.jpg" alt="moduletemplate"></p> <p><strong>How to use Module Template</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 
xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot; 
xmlns:caw=&quot;http://www.cloud-at-work.com&quot;
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>decorate</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/view/template/viewTemplate.xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>adtPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>param</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>define</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toolArea<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--toolbar--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>define</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>define</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toolbar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>actionItem</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customed<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customAction<span class="token punctuation">&quot;</span></span> <span class="token attr-name">actionListener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{xxxBean.doAction}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>actionItem</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>define</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>define</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchView<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!--searchView--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>define</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>define</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>additionPanel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--additionView--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>define</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>decorate</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>Attributes</strong>:</p> <table><thead><tr><th>Parameter Name</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>hideSearchPage</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>Hide <code>searchView</code></td></tr> <tr><td>hideRecordInfo</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>Hide &quot;record info&quot;“</td></tr> <tr><td>hideRightToolbar</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>Hide the buttons in the top right hand corner</td></tr> <tr><td>hideToolbar</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>Hide <code>toolbar</code></td></tr> <tr><td>hideBeSelect</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>Hide <strong>Business Entity</strong> combo box</td></tr> <tr><td>adtPage</td> <td><code>boolean</code></td> <td><code>false</code></td> <td>Hide <code>additionView</code></td></tr> <tr><td>searchLayoutConfigurable</td> <td><code>boolean</code></td> <td><code>true</code></td> <td>Indicate if <code>searchView</code> layout is configurable</td></tr></tbody></table> <h3 id="frame-events"><a href="#frame-events" class="header-anchor">#</a> Frame Events</h3> <p>List of events developer can listen to a Frame.</p> <h4 id="javascript-events"><a href="#javascript-events" class="header-anchor">#</a> JavaScript Events</h4> <table><thead><tr><th>Event</th> <th>Description</th></tr></thead> <tbody><tr><td><code>Frame.Event.SIZECHANGE</code></td> <td>Triggered when frame size changed</td></tr> <tr><td><code>Frame.Event.MODSTATUS</code></td> <td>Triggered when front-end components send data to back-end or status changed</td></tr> <tr><td><code>Frame.Event.INIT</code></td> <td>Triggered when the view is initialized</td></tr> <tr><td><code>Frame.Event.ACTIVED</code></td> <td>Triggered when the view is selected/activated</td></tr> <tr><td><code>Frame.Event.DEACTIVED</code></td> <td>Triggered when the view is unselected/deactived</td></tr> <tr><td><code>Frame.Event.CLOSING</code></td> <td>Triggered when the frame is closed</td></tr></tbody></table> <p>All of the above events can be directly used in JavaScript:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Frame<span class="token punctuation">.</span>Event<span class="token punctuation">.</span><span class="token constant">ACTIVED</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Module<span class="token punctuation">.</span>Event<span class="token punctuation">.</span><span class="token constant">ACTIVED</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="java-events"><a href="#java-events" class="header-anchor">#</a> Java Events</h4> <p>Bind events and back-end using <code>ajax</code>.</p> <p>Support events：<code>opened</code>, <code>closed</code>, <code>active</code>, <code>deactived</code>, <code>dialogReturn</code>.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frame</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>ajax</span> <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opened<span class="token punctuation">&quot;</span></span> <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{xxxBean.doAction}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">process</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@this<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>ajax</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frame</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="module-events"><a href="#module-events" class="header-anchor">#</a> Module Events</h3> <h4 id="javascript-events-2"><a href="#javascript-events-2" class="header-anchor">#</a> JavaScript Events</h4> <p>Module got all events of a Frame, and provide <strong>BEFORE</strong> and <strong>AFTER</strong> events for each of the below events:</p> <p><strong><code>Module.Event.BEFORE_ + Event Code</code></strong> and <strong><code>Module.Event.AFTER_ + Event Code</code></strong></p> <table><thead><tr><th>Action</th> <th>Event Code</th></tr></thead> <tbody><tr><td>Refresh</td> <td><code>REFRESH</code></td></tr> <tr><td>Create</td> <td><code>CREATE</code></td></tr> <tr><td>Save</td> <td><code>SAVE</code></td></tr> <tr><td>Save As</td> <td><code>SAVEAS</code></td></tr> <tr><td>Rename</td> <td><code>RENAME</code></td></tr> <tr><td>Save as Draft</td> <td><code>SAVEASDRAFT</code></td></tr> <tr><td>Save as Template</td> <td><code>SAVEASTEMPLATE</code></td></tr> <tr><td>Delete</td> <td><code>DELETE</code></td></tr> <tr><td>Read</td> <td><code>READ</code></td></tr> <tr><td>Print</td> <td><code>PRINT</code></td></tr> <tr><td>Print as Excel</td> <td><code>PRINTASEXCEL</code></td></tr> <tr><td>Print as HTML</td> <td><code>PRINTASHTML</code></td></tr> <tr><td>Print as RTF</td> <td><code>PRINTASRTF</code></td></tr> <tr><td>BE Change</td> <td><code>BECHANGE</code></td></tr></tbody></table> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Module<span class="token punctuation">.</span>Event<span class="token punctuation">.</span><span class="token constant">AFTER_SAVE</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="java-events-2"><a href="#java-events-2" class="header-anchor">#</a> Java Events</h4> <p>Based on <code>ViewListener</code>, module provides <code>ModuleViewListener</code> which contains more method for implementation.</p> <h2 id="dialog-development"><a href="#dialog-development" class="header-anchor">#</a> Dialog Development</h2> <h3 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h3> <p>Dialog is a pop up window that will block and lock the underlying view.</p> <p><strong>Dialog Container</strong></p> <p>Dialog view is located in Dialog Container.</p> <p>aiM18 present two different dialog views: <strong>App View</strong> and <strong>Frame View</strong></p> <blockquote><p><strong>Attention</strong>：</p> <ul><li>Dialog will lock / block Dialog Container until the dialog is closed.</li> <li>For dialog in Frame View, it will only block the associated Frame, other frame views can still operate as normal.</li> <li>For dialog in App View, the entire aiM18 Application will be blocked until the dialog is closed.</li></ul></blockquote> <p><strong>Dialog Type</strong></p> <p>Dialog, based on the purpose of data, is classified into 3 types:</p> <ul><li>String/Text</li> <li><code>HTML</code> format</li> <li>Independent JSF File(JSF View)</li></ul> <blockquote><p><strong>Attention</strong>：</p> <ul><li>Dialog will not block the processing thread, even back-end bean use <code>WebUtil.showDialog</code>, Dialog will not be shown immediately until back-end thread is completed and request will then be sent to front-end.</li> <li>Callback function can be defined and will run upon dialog closing. For detail please refer to <a href="#dialog-close-and-callback">Dialog Close and Callback</a>.</li> <li>For dialog that have back-end data binding, there is a <code>CawDialog</code> object in back-end. With the help from <code>CawDialog</code>, more setting/action on dialog can be done, for details, please refer to <a href="#cawdialog-object">CawDialog Object</a>.</li></ul></blockquote> <h3 id="prompt-the-dialog"><a href="#prompt-the-dialog" class="header-anchor">#</a> Prompt the Dialog</h3> <h4 id="using-javascript"><a href="#using-javascript" class="header-anchor">#</a> Using JavaScript</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//myView is an instance of JsView, which is defined in CawView.js, exist in every JSF View.</span>
myView<span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'This is a message dialog'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myView<span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;p&gt;This is a html message&lt;/p&gt;'</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myView<span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/jsf/view/dialog/dlgView.faces'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'frame'</span><span class="token punctuation">,</span> <span class="token comment">//optional, if not input will use current frame.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For the available dialog's setting, please refer to <a href="#dialog-s-setting">Dialog Setting</a>.</p> <h4 id="using-java"><a href="#using-java" class="header-anchor">#</a> Using Java</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Show text message</span>
<span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showMessage</span><span class="token punctuation">(</span>'<span class="token class-name">Text</span> message<span class="token char">', '</span><span class="token class-name">Dialog</span> <span class="token class-name">Title</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Show HTML</span>
<span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showHtmlMessage</span><span class="token punctuation">(</span>'<span class="token generics"><span class="token punctuation">&lt;</span>p<span class="token punctuation">&gt;</span></span><span class="token class-name">Html</span> text message<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token char">', '</span><span class="token class-name">Dialog</span> <span class="token class-name">Title</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Show JSF View</span>
<span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span>'<span class="token operator">/</span>jsf<span class="token operator">/</span>view<span class="token operator">/</span>dialog<span class="token operator">/</span>dlgView<span class="token punctuation">.</span>faces'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Use CawDialog</span>
<span class="token class-name">CawDialog</span> dialog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CawDialog</span><span class="token punctuation">(</span><span class="token string">&quot;/view/dialog/dlgView&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dialog<span class="token punctuation">.</span><span class="token function">setDialogName</span><span class="token punctuation">(</span><span class="token string">&quot;dlgView&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dialog<span class="token punctuation">.</span><span class="token function">addRequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;param1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dialog<span class="token punctuation">.</span><span class="token function">addRequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;param1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span>dialog<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Detail of CawDialog please refer to <a href="#cawdialog-object">CawDialog Object</a></p> <h3 id="cawdialog-object-and-dialog-s-setting"><a href="#cawdialog-object-and-dialog-s-setting" class="header-anchor">#</a> <code>CawDialog</code> Object and Dialog's Setting</h3> <h4 id="cawdialog-object"><a href="#cawdialog-object" class="header-anchor">#</a> <code>CawDialog</code> Object</h4> <p>Core methods of <code>CawDialog</code>:</p> <table><thead><tr><th>Method</th> <th>Description</th></tr></thead> <tbody><tr><td><code>setDialogName(String name)</code></td> <td>Specify the name of the dialog, which is used in Callback to distinguish different dialog.</td></tr> <tr><td><code>setTarget(DialogTarget target)</code></td> <td>Define the dialog container. Options:<code>DialogTarget.frame</code> , <code>DialogTarget.app</code></td></tr> <tr><td><code>setType(DialogType type)</code></td> <td>Define the dialog type：Options: <code>DialogType.message</code>, <code>DialogType.html</code> or <code>DialogType.custom</code></td></tr> <tr><td><code>setContent(String content)</code></td> <td>When type is <code>DialogTarget.message</code> and <code>DialogTarget.html</code>, variable<code>content</code> is the message; when type is<code>DialogTarget.custom</code>，<code>content</code> is the URL.</td></tr> <tr><td><code>setWithResponse(boolean value)</code></td> <td>Indicate if there is any callback method to run after dialog closed.</td></tr> <tr><td><code>addRequestParam(String key, Object value)</code></td> <td>Only valid when type is <code>custom</code>, set the request parameters of target dialog URL.</td></tr> <tr><td><code>addParam(String key, Object value)</code></td> <td>Only valid when type is <code>custom</code>, used to pass the data to target dialog, the data is passed by session.</td></tr> <tr><td><code>setOption(String key, Object value)</code></td> <td>Define dialog options, detail please refer to item 8 - 17 in <a href="#dialog-s-setting">Dialog Setting</a>.</td></tr></tbody></table> <h4 id="dialog-s-setting"><a href="#dialog-s-setting" class="header-anchor">#</a> Dialog's Setting</h4> <table><thead><tr><th>No</th> <th>Option</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>1</td> <td>dialogName</td> <td><code>String</code></td> <td>Specify the name of the dialog, which is used in Callback to distinguish different dialog.</td></tr> <tr><td>2</td> <td>dialogId</td> <td><code>String</code></td> <td>Unique ID of dialog</td></tr> <tr><td>3</td> <td>dialogParent</td> <td><code>String</code></td> <td>Define the parent dialog ID, if <code>empty</code>, system will auto detect.</td></tr> <tr><td>4</td> <td>dialogHandler</td> <td><code>String</code></td> <td>Only used in JSF component development, set the component that react to dialog callback.</td></tr> <tr><td>5</td> <td>url</td> <td><code>String</code></td> <td>Define the URL of custom dialog in JSF file</td></tr> <tr><td>6</td> <td>message</td> <td><code>String</code></td> <td>Define the message of text dialog</td></tr> <tr><td>7</td> <td>html</td> <td><code>String</code></td> <td>Define the html of html dialog</td></tr> <tr><td>8</td> <td>title</td> <td><code>String</code></td> <td>Define the title of dialog</td></tr> <tr><td>9</td> <td>ftype</td> <td><code>String</code></td> <td>When dialog type is <code>message</code> / <code>html</code>, set the action buttons. Options: <code>confirm</code>,  <code>askif</code></td></tr> <tr><td>10</td> <td>width</td> <td><code>int</code></td> <td>Define the dialog's width in px</td></tr> <tr><td>11</td> <td>height</td> <td><code>int</code></td> <td>Define the dialog's height in px</td></tr> <tr><td>12</td> <td>maxView</td> <td><code>boolean</code></td> <td>Indicate if the dialog should be maximized.</td></tr> <tr><td>13</td> <td>resizable</td> <td><code>boolean</code></td> <td>Indicate if the dialog is re-sizable.</td></tr> <tr><td>14</td> <td>draggable</td> <td><code>boolean</code></td> <td>Indicate if the dialog is drag-gable.</td></tr> <tr><td>15</td> <td>maximize</td> <td><code>boolean</code></td> <td>Indicate if the dialog can be maximized.</td></tr> <tr><td>16</td> <td>onClose</td> <td><code>JS Function</code></td> <td>Define the JavaScript function to run upon dialog is closing.</td></tr> <tr><td>17</td> <td>onCallback</td> <td><code>JS Function</code></td> <td>Define the JavaScript function to run after dialog is closed and before callback running. if return <code>false</code>, callback will be canceled.  If return a JavaScript object, can pass the parameters to callback in back-end.</td></tr></tbody></table> <p><strong>3 ways to set Dialog Options</strong></p> <ol><li><p>When using JavaScript to show dialog, use <code>myView.showDialog(dialogOption)</code>.</p></li> <li><p>When using Java to show dialog, use <code>CawDialog</code> to set.</p></li> <li><p>For custom dialog, use <code>&lt;caw:dialogOption</code> in JSF view like below:</p></li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>dialogOption</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>500<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myTitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resizable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maximize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxView</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>dialogOption</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="dialog-close-and-callback"><a href="#dialog-close-and-callback" class="header-anchor">#</a> Dialog Close and Callback</h3> <h4 id="dialog-close"><a href="#dialog-close" class="header-anchor">#</a> Dialog Close</h4> <p>When the dialog is closed, there are two outputs:</p> <ol><li>Closing status, includes <code>OK</code>, <code>CANCEL</code>, <code>YES</code>, <code>NO</code>.</li> <li>The <code>returnObject</code> object, which is the data that will be passed to callback.</li></ol> <p><strong>Methods to Close the Dialog</strong></p> <p><strong>JavaScript</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>myView<span class="token punctuation">.</span><span class="token function">closeDialog</span><span class="token punctuation">(</span>dialogId<span class="token punctuation">,</span> status<span class="token punctuation">,</span> returnObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Java</strong>：</p> <p>Only can be done in <code>DialogView</code>:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//controller is DialogController object</span>
controller<span class="token punctuation">.</span><span class="token function">closeDialog</span><span class="token punctuation">(</span><span class="token class-name">DialogStatus</span> status<span class="token punctuation">,</span> <span class="token class-name">Object</span> returnObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="dialog-callback"><a href="#dialog-callback" class="header-anchor">#</a> Dialog Callback</h4> <p>Dialog callback will be triggered when dialog is closed, the operation will be based on dialog status and returned data.</p> <p>There are 4 ways to add callback methods</p> <ol><li>In dialog's parent frame (the frame that the dialog is prompted), use <code>dialogHandler</code> to specify the callback:</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>dialogHandler</span> <span class="token attr-name">actionListener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{dlgParentBean.dialogClosed}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>   <span class="token comment">//dlgParentBean</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dialogClosed</span><span class="token punctuation">(</span><span class="token class-name">FacesEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">String</span> dialogId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>event<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">WebConstants<span class="token punctuation">.</span>Dialog</span><span class="token punctuation">.</span><span class="token constant">CONVERSATION_PARAM</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	<span class="token keyword">if</span> <span class="token punctuation">(</span>dialogId <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   		<span class="token class-name">CawDialog</span> dialog <span class="token operator">=</span> <span class="token class-name">FacesUtil</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>dialogId<span class="token punctuation">)</span><span class="token punctuation">;</span>
         	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;dialog1&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>dialog<span class="token punctuation">.</span><span class="token function">getDialogName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//do callback for dialog1</span>
            <span class="token punctuation">}</span>
   	<span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>In dialog's parent frame, use <code>ajax</code> tag to mark callback for dialog:</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>dialogHandler</span><span class="token punctuation">&gt;</span></span>
     	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>ajax</span> <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogReturn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">actionCommand</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{dlgParentBean.dialog1Callback}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>ajax</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>dialogHandler</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>   <span class="token comment">//dlgParentBean</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dialog1Callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">//do callback for dialog1</span>
   <span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>Declare in Java code of the prompted dialog:</li></ol> <div class="language-java extra-class"><pre class="language-java"><code>   <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span><span class="token string">&quot;/jsf/view/dialog/dialog1.faces&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dialog1&quot;</span><span class="token punctuation">,</span>  <span class="token punctuation">(</span>dialog<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span><span class="token comment">//do callback});</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>   <span class="token class-name">CawDialog</span> dlg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CawDialog</span><span class="token punctuation">(</span><span class="token string">&quot;/view/dialog/ebi/ebiLinkSettingModuleRule.xhtml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   dlg<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DialogCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

     <span class="token annotation punctuation">@Override</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processAction</span><span class="token punctuation">(</span><span class="token class-name">CawDialog</span> dialog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">DialogStatus</span><span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>dialog<span class="token punctuation">.</span><span class="token function">getCloseStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        	<span class="token comment">//do callback</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">showDialog</span><span class="token punctuation">(</span>dlg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li><p>Declare in ViewListener:</p> <p>Only need to implement the below method in ViewListener:</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code>   <span class="token comment">//ViewListener of parent frame of the dialog</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dialogCallback</span><span class="token punctuation">(</span><span class="token class-name">ViewActionEvent</span> vae<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   	<span class="token class-name">CawDailog</span> dialog <span class="token operator">=</span> vae<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;dialog1&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>dialog<span class="token punctuation">.</span><span class="token function">getDialogName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">//do callback for &quot;dialog1&quot;</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
</code></pre></div><p>This is the simplest and the most recommended way.</p> <h2 id="messaging-mechanism"><a href="#messaging-mechanism" class="header-anchor">#</a> Messaging Mechanism</h2> <h3 id="introduction-2"><a href="#introduction-2" class="header-anchor">#</a> Introduction</h3> <p>During back-end processing, we always need to feedback some messages (including errors) to front-end, this section describes how to use JSF messaging mechanism.</p> <p>Message can be added in the back-end when processing an request from font-end. However for the messages to be presented, there must be front-end components responsible for rendering JSF messages. Therefore, developers need to specify the components to render the message in JSF view.</p> <p>Messages can be binded or not binded to a component. Messages that are not binded are called <strong>global messages</strong>, and messages that binded are called <strong>component messages</strong>.</p> <h4 id="message-classification"><a href="#message-classification" class="header-anchor">#</a> Message Classification</h4> <p>There are three types:</p> <ol><li><p>Built-in JSF Message</p> <p>Can only displayed in specify components:</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code>   <span class="token comment">//Component message:  MessageUtil.postMessage(String clientId, FacesMessage message)</span>
   <span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">getFacesId</span><span class="token punctuation">(</span><span class="token char">'id'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">FacesMessage</span><span class="token punctuation">(</span>'<span class="token class-name">Message</span> <span class="token class-name">Summary</span><span class="token char">', '</span><span class="token class-name">Message</span> <span class="token class-name">Detail</span>'<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

   <span class="token comment">//Global message: MessageUtil.postMessage(FacesMessage message)</span>
   <span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FacesMessage</span><span class="token punctuation">(</span>'<span class="token class-name">Message</span> <span class="token class-name">Summary</span><span class="token char">', '</span><span class="token class-name">Message</span> <span class="token class-name">Detail</span>'<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li><p>Notice Message</p> <p>There is default display for this kind of message, developers do no need to specify the component. If developers specify a component to display, system will not automatically display it in UI.</p> <p><img src="/assets/notice.jpg" alt="notice"></p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code>   <span class="token comment">//MessageUtil.postNotice(String message)</span>
   <span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postNotice</span><span class="token punctuation">(</span><span class="token string">&quot;Notice message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">//MessageUtil.postNotice(MessageType type, String message)</span>
   <span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postNotice</span><span class="token punctuation">(</span><span class="token class-name">MessageType</span><span class="token punctuation">.</span><span class="token constant">INFO</span><span class="token punctuation">,</span> <span class="token string">&quot;Notice Message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">//MessageUtil.postNotice(MessageType type, String message, boolean htmlMessage, int delayClose)</span>
   <span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postNotice</span><span class="token punctuation">(</span><span class="token class-name">MessageType</span><span class="token punctuation">.</span><span class="token constant">INFO</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;p&gt;Notice Message&lt;/p&gt;&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li><p>Message in Message Center</p> <p><strong>Message Center</strong> is a messaging mechanism designed for <strong>Frame View</strong>. It is used to provide detail message to user regarding various system operations.</p> <p><strong>Message Center</strong> is used to display the <code>CheckMsg</code> object which is mainly warning/error messages returned by back-end.</p> <p><strong>Message Center</strong> display <code>ActionMessage</code> object，it provides two types of interaction:</p> <ul><li><code>ActionMessage</code>can locate and highlight specific component in the underlying frame view:</li></ul></li></ol> <div class="language-java extra-class"><pre class="language-java"><code>     <span class="token class-name">ActionMessage</span> message <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
     <span class="token class-name">FieldLocator</span> locator <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
     message<span class="token punctuation">.</span><span class="token function">addLocator</span><span class="token punctuation">(</span>locator<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>ActionMessage</code> provideds<code>messageKey</code>and<code>messageData</code> with brief and detailed message to end users.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>     <span class="token class-name">ActionMessage</span> message <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
     message<span class="token punctuation">.</span><span class="token function">setMessageKey</span><span class="token punctuation">(</span>'core_101'<span class="token punctuation">)</span><span class="token punctuation">;</span>
     message<span class="token punctuation">.</span><span class="token function">setMessageData</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>When the <code>ActionMessage</code> is generated using <code>CheckMsg</code> object, field locations, <code>messageKey</code>, and <code>messageData</code> are automatically generated based on <code>CheckMsg</code>.</p> <p>Display of message center:</p> <p><img src="/assets/msgCenter.jpg" alt="msgCenter"></p> <p>Can add message to message center by:</p> <div class="language-java extra-class"><pre class="language-java"><code>   <span class="token comment">//MessageUtil.postMessage(String message)</span>
   <span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">//MessageUtil.postMessage(MessageType type, String message, boolean autoClose, boolean closable)</span>
   <span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageType</span><span class="token punctuation">.</span><span class="token constant">INFO</span><span class="token punctuation">,</span> <span class="token string">&quot;Message&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">//Generate ActionMessage</span>
   <span class="token class-name">ActionMessage</span> message <span class="token operator">=</span> <span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageType</span><span class="token punctuation">.</span><span class="token constant">INFO</span><span class="token punctuation">,</span> <span class="token string">&quot;Message Text&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   message<span class="token punctuation">.</span><span class="token function">setMessageKey</span><span class="token punctuation">(</span><span class="token string">&quot;messageKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   message<span class="token punctuation">.</span><span class="token function">setMessageData</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">//Generate message from CheckMsg</span>
   <span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="message-center"><a href="#message-center" class="header-anchor">#</a> Message Center</h3> <p>Every message in message center is separated into 2 parts: <strong>list view</strong> and <strong>detail view</strong></p> <h4 id="define-detail-view-in-javascript"><a href="#define-detail-view-in-javascript" class="header-anchor">#</a> Define Detail View in JavaScript</h4> <p>This method only works in single view.</p> <p>Define detail view for <code>messageKey=&quot;core_101&quot;</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>Messager<span class="token punctuation">.</span>render<span class="token punctuation">,</span> <span class="token punctuation">{</span>
   <span class="token string-property property">'core_101'</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token function-variable function">renderTitle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">msgCenter<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token string">'Customed title'</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token function-variable function">renderView</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">msgCenter<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">var</span> view <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;div&gt;Customed detail View here&lt;/div&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>msgCenter<span class="token punctuation">.</span>detailView<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.detail-body'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> view<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="define-detail-view-in-java"><a href="#define-detail-view-in-java" class="header-anchor">#</a> Define Detail View in Java</h4> <p>This method works in multiple views.</p> <ol><li>Register the view in <code>app.xml</code></li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message-render</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>from-view-id</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>from-view-id</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message-case</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>core_201<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>render</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>render</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to-view-id</span><span class="token punctuation">&gt;</span></span>/view/message/fkMessage.xhtml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>to-view-id</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>message-case</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message-case</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>core_160503<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>render</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>render</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to-view-id</span><span class="token punctuation">&gt;</span></span>/view/message/fieldGroupMessage.xhtml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>to-view-id</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>message-case</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>message-render</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>Attention：</p> <ul><li><p>Can have multiple <code>message-render</code>.</p></li> <li><p><code>from-view-id</code> define the view that will use the current message center detail view, if not specify, it will apply to all frame views.</p></li> <li><p><code>message-case</code> define type of messages.</p></li> <li><p><code>key</code> means <code>messageKey</code>.</p></li> <li><p><code>render</code> is optional, it is the class that implemented <code>MessageRender</code> interface.</p></li> <li><p><code>to-view-id</code> define the JSF file of the target view.</p></li> <li><p><code>view-param</code> define the parameters passed to the target JSF view.</p></li></ul></blockquote> <ol start="2"><li>Program detail view page</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>568px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>278px<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   	...
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>body</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">&gt;</span></span>#{message.info}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>body</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><blockquote><p>Attention:</p> <ul><li>Define the size of the detail view by setting <code>data-width</code>, <code>data-height</code> on <code>&lt;caw: view&gt;</code> in <code>px</code></li> <li>Get <code>messageData</code> via <code>#{message}</code> in the page</li> <li>The following snippet showing how to get <code>messageData</code> in the Java Bean / ViewListener</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Object</span> messageData <span class="token operator">=</span> <span class="token class-name">FacesUtil</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getELContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLambdaArgument</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>aiM18 provided a base Bean type <code>CawMessageBean</code>. Extending this class can get <code>messageData</code> by variable <code>msg</code>.</li></ul></blockquote> <h3 id="self-defined-messages"><a href="#self-defined-messages" class="header-anchor">#</a> Self Defined Messages</h3> <p>If you still need to customize the message behavior, please refer to the components: <a href="/pages/793dcg/">messages</a> and <a href="/pages/793dcg/">dynamicMessages</a></p> <h2 id="namecard-development"><a href="#namecard-development" class="header-anchor">#</a> Namecard Development</h2> <p><strong>Namecard</strong> is a mini pop-up window to show additional information of a field, mostly used in lookup fields.</p> <p>For example, when mouse over the department lookup field, a namecard will be shown to show the department name/description, etc..</p> <p><img src="/assets/namecard.jpg" alt="namecard"></p> <h3 id="namecard-trigger"><a href="#namecard-trigger" class="header-anchor">#</a> Namecard Trigger</h3> <p><strong>Namecard</strong> will be shown when mouse over JSF component:</p> <p>Components that fulfill below conditions will trigger namecard:</p> <ol><li>Component has <code>data-lookup</code> attribute, set to a type in <code>stSearch.xml</code></li></ol> <div class="language-html extra-class"><pre class="language-html"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-lookup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><ol start="2"><li><p>Component can get the <code>id</code> info of <code>lookup</code> data</p> <p>Methods to add <code>lookup</code> data</p> <ul><li>Use<code>data-id</code> tag in HTML component</li></ul></li></ol> <div class="language-html extra-class"><pre class="language-html"><code>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-lookup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>Use JavaScript</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>     <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#text1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'active.nc'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="create-namecard"><a href="#create-namecard" class="header-anchor">#</a> Create Namecard</h3> <p><strong>Namecard</strong> display is based on : <strong>data</strong> and <strong>display template</strong></p> <p><strong>Namecard data</strong> includes 3 parts：</p> <ul><li>All data returned by the lookup</li> <li>Attachment files</li> <li>URL links</li></ul> <p>Deverlopers/Users can set &quot;file data to be shown in namecard&quot; and &quot;URL link to be shown in namecard&quot;</p> <p><strong>Namecard Display Template</strong> is one of the method to show/display namecard</p> <p>Developers can develop new template, and they can choose template for specific <code>lookup</code></p> <blockquote><p><strong>Attention</strong>:</p> <ul><li>aiM18 define default &quot;display data&quot; for all <code>lookup</code>, developers can add &quot;display data&quot;,</li> <li>aiM18  provides default <strong>namecard</strong> template, developers can set properties of default template or create the template themselves.</li></ul></blockquote> <h4 id="namecard-data"><a href="#namecard-data" class="header-anchor">#</a> Namecard Data</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stSearch</span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>namecard</span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>400<span class="token punctuation">&quot;</span></span> <span class="token attr-name">widht</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>250<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">imgCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>photo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">extendDefault</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>core.code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">menuCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>empId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Go to employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>templateCode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">templateOption</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>namecard</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>stSearch</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong><code>namecard</code> attributes</strong></p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>height</td> <td>Height of namecard</td></tr> <tr><td>width</td> <td>Width of namecard</td></tr> <tr><td>imgCode</td> <td>Set an image for the <strong>default template</strong></td></tr> <tr><td>src</td> <td>Define a JSF View file to show the namecard. If not <code>empty</code>, default namecard template will not be used.</td></tr> <tr><td>extendDefault</td> <td><strong>Default is <code>true</code></strong>. When <code>true</code>, add <code>field</code> and <code>link</code> based on <strong>default template</strong>, when <code>false</code>, <strong>default template</strong> is not used.</td></tr></tbody></table> <p><strong><code>field</code> attributes</strong></p> <p><code>field</code> used to add fields to namecard.</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td><code>lookup</code>field name</td></tr> <tr><td>mess</td> <td>Mess code of field</td></tr></tbody></table> <p><code>field</code> can be a <code>link</code>, when the <code>link</code> is set, users can click the link on the namecard and will be redirected according to the <code>link</code>.</p> <p><strong><code>link</code> attributes</strong></p> <p><code>link</code> used to add additional link to namecard.</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>menuCode</td> <td>Menu code of editor, can be found in data dictionary</td></tr> <tr><td>id</td> <td>Define the field need to pass to the target editor as an id.</td></tr> <tr><td>text</td> <td><code>messCode</code> of the link</td></tr> <tr><td>href</td> <td>If link to external resource, please input <code>url</code>.</td></tr> <tr><td>needBe</td> <td>Indicate if Business Entity need to change in the target editor.</td></tr></tbody></table> <p><code>link</code> can also set by <code>param</code>.</p> <p><strong><code>param</code>attributes</strong></p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td>Parameter name to pass to the link</td></tr> <tr><td>value</td> <td>Parameter value to pass to the link，<code>String</code> type.</td></tr> <tr><td>field</td> <td>The lookup field that the parameter value come from.</td></tr></tbody></table> <h4 id="namecard-template"><a href="#namecard-template" class="header-anchor">#</a> Namecard Template</h4> <p>Developer can use <code>option</code> tag, to change the display template of a namecard, attributes described below:</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>template</td> <td>The namecard template code</td></tr> <tr><td>templateOption</td> <td>The template options in <code>json</code>  format</td></tr></tbody></table> <p>Namecard's size can be set using the following snippet:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>namecardOption</span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>500<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="namecard-template-development"><a href="#namecard-template-development" class="header-anchor">#</a> Namecard Template Development</h3> <p><strong>Namecard Template</strong> is used by developers/end-users to apply lookup's namecard.</p> <p>Developers uses <code>namecard</code> tag in <code>stSearch.xml</code> to set the namecard template.</p> <p>End-user uses define the &quot;Namecard&quot; tag in &quot;UDF Lookup&quot; to set the namecard like below:</p> <h4 id="udf-namecard"><a href="#udf-namecard" class="header-anchor">#</a> UDF Namecard</h4> <p><img src="/assets/udfnc.jpg" alt="udfnc"></p> <p>All the options in the above are provided by corresponding namecard template.</p> <h4 id="development"><a href="#development" class="header-anchor">#</a> Development</h4> <p><strong>Namecard Template</strong> only responsible for showing namecard data. Setting page is needed for end-users if options are provided to them.</p> <h5 id="registration"><a href="#registration" class="header-anchor">#</a> Registration</h5> <p>Register namecard template in app.xml.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>namecard</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>verticalNamecard<span class="token punctuation">&quot;</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>core.defaultNamecard<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page</span><span class="token punctuation">&gt;</span></span>view/namecard/verticalNamecard.xhtml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">option</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.config.VerticalNamecardOption<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      /view/namecard/verticalTemplateSetting.xhtml
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>setting</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>namecard</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>namecard</code> attributes</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>An unique code of the template</td></tr> <tr><td>description</td> <td><code>messCode</code> of the template</td></tr> <tr><td>lookupType</td> <td>Define the lookup type that will apply this template. <code>,</code> separated.</td></tr></tbody></table> <p><code>page</code> for setting namecard template view file.</p> <p><code>setting</code> for setting namecard template setting view file, there is option attribute:</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>option</td> <td>Java object used to specify the setting data (must be a simple JAVA object with set / get methods and can be grabbed as json using fastjson)</td></tr></tbody></table> <h5 id="template-view"><a href="#template-view" class="header-anchor">#</a> Template View</h5> <p>Template is a JSF view file, follow all JSF rules and there is no extra limitation.</p> <p>In this view, developers can use global variables that have already defined:</p> <table><thead><tr><th>Expression</th> <th>Return Value</th> <th>Description</th></tr></thead> <tbody><tr><td><code>#{namecard}</code></td> <td><code>NamecardInfo</code></td> <td><code>NamecardInfo</code>contains all setting info of the namecard</td></tr> <tr><td><code>#{option}</code></td> <td>The java object stated by <code>option</code> attribute in the <code>setting</code> tag in namecard registration in <code>app.xml</code></td> <td></td></tr> <tr><td><code>#{namecardBean}</code></td> <td><code>NamecardBean</code></td> <td><code>NamecardBean</code> is a SessionScope`Java Bean。</td></tr> <tr><td><code>#{namecard.fields}</code></td> <td><code>List&lt;NamecardField&gt;</code></td> <td>Return all displayed fields in namecard</td></tr> <tr><td><code>#{namecard.links}</code></td> <td><code>List&lt;NamecardLink&gt;</code></td> <td>Return all additional link URLs in namecard</td></tr> <tr><td><code>#{namecardBean.imageCode}</code></td> <td><code>String</code></td> <td>Return the image code of photo in namecard</td></tr> <tr><td><code>#{namecardBean.getText(field)}</code></td> <td><code>String</code></td> <td>Get text of the namecard field</td></tr> <tr><td><code>#{namecardBean.isFieldRendered(field)}</code></td> <td><code>boolean</code></td> <td>Check if a field is rendered in namecard</td></tr> <tr><td><code>#{namecardBean.getLinkUrl(link)}</code></td> <td><code>String</code></td> <td></td></tr> <tr><td><code>#{namecardBean.isSystemLink(link)}</code></td> <td><code>boolean</code></td> <td><code>True</code> if the link is internal link.</td></tr> <tr><td><code>{namecardBean.isLinkRendered(link)}</code></td> <td></td> <td></td></tr> <tr><td><code>#{namecardBean.openSupport}</code></td> <td><code>boolean</code></td> <td>Indicate if open transaction function is supported</td></tr> <tr><td><code>#{namecardBean.printSupport}</code></td> <td><code>boolean</code></td> <td>Indicate if document printing is supported</td></tr> <tr><td><code>#{namecardBean.attachSupport}</code></td> <td><code>boolean</code></td> <td>Indicate if attachment should be shown in the transaction.</td></tr> <tr><td><code>#{namecardBean.attachment}</code></td> <td><code>SqlTableIteratorModel</code></td> <td>Return all attached files in the namecard, can use JSF <code>&lt;c:foreach&gt;</code>，<code>&lt;ui:repeat&gt;</code> to handle the data</td></tr></tbody></table> <h5 id="namecard-setting-editor"><a href="#namecard-setting-editor" class="header-anchor">#</a> Namecard Setting Editor</h5> <p><strong>Setting Description</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">option</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.config.VerticalNamecardOption<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  /view/namecard/verticalTemplateSetting.xhtml
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>setting</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>option</code> should define a class that support JSON conversion, which means to support <code>JSON.toJSONString(optionObject)</code>and<code>JSON.parse(String, optionClass)</code> using fastJson.</p> <p><strong>Recommendation</strong>: Write as POJOs, for complicated java class, please implement <code>JSONserializer</code>and<code>JSONDeserializer</code>.</p> <p><strong>Setting Page (View)</strong></p> <p>The setting UI must be inside the <code>&lt;ui:composition&gt;&lt;/ui:composition&gt;</code> tag.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//W3C//DTD XHTML 1.0 Frameset//EN&quot;</span> <span class="token string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xhtml<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>ui</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/jsf/facelets<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>composition</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!--Namecard setting view here --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>composition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Java backing bean can be used in the setting view. However, the Bean must implement the<code>TemporaryBean</code> interface, and <code>getTemplateKey()</code> method in the <code>TemporaryBean</code> which return the template code.</p> <h2 id="shortcut-development"><a href="#shortcut-development" class="header-anchor">#</a> Shortcut Development</h2> <h3 id="introduction-3"><a href="#introduction-3" class="header-anchor">#</a> Introduction</h3> <p>aiM18 provide general method to implement the shortcut function.</p> <p>Shortcut's Attributes：</p> <ul><li><code>code</code>: Unique key. Recommend developer to use the app's code as suffix of the shortcut's code.</li> <li><code>key</code>: Trigger key of the shortcut. Combined key use <strong>Space</strong> to separated. Example:<code>ctrl shift f</code>.</li> <li><code>mess</code>: Description of the shortcut，use <code>messCode</code>.</li> <li><code>action</code>: Action triggered by the shortbut.</li></ul> <h3 id="using-shortcut-in-components"><a href="#using-shortcut-in-components" class="header-anchor">#</a> Using Shortcut in Components</h3> <p>Currently, only 3 components support shortcut, they are <code>commandButton</code>、<code>toolbar(actionItem)</code> and <code>dropMenu(menuItem)</code>. When shortcut is triggered, the event triggered will like a mouse click event.</p> <p><strong>How to use：</strong></p> <p>Use the following attributes in the component:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>commandButton</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>download<span class="token punctuation">&quot;</span></span> <span class="token attr-name">shortcut</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ctrl alt t<span class="token punctuation">&quot;</span></span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>commandButton</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>toolbar</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>actionItem</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>refresh<span class="token punctuation">&quot;</span></span> <span class="token attr-name">shortcut</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ctrl shift r<span class="token punctuation">&quot;</span></span> <span class="token attr-name">shortcutCommand</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module.refresh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>actionItem</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>toolbar</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>Attributes</strong></p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>shortcut</td> <td><strong>Required</strong>. Trigger key for the action.</td></tr> <tr><td>shortcutCommand</td> <td>Shortcut's code. If <code>empty</code>, system will use the <code>id</code> of the <code>commandButton</code>, <code>id</code>+<code>action</code> of the <code>toolbar(actionItem)</code> and <code>id</code> + <code>event</code> of <code>dropmenu(menuItem)</code>.</td></tr> <tr><td>shortcutMess</td> <td>Shortcut's description. If <code>empty</code>, system will use the <code>label</code> of the component.</td></tr></tbody></table> <blockquote><p><strong>Attention：</strong></p> <p>The <code>shortcutMess</code> should use a <code>messcode</code> which is web mess.</p></blockquote> <h3 id="using-shortcut-in-editor"><a href="#using-shortcut-in-editor" class="header-anchor">#</a> Using Shortcut in Editor</h3> <p>User can define shortcut for different actions in editors.</p> <p><strong>How to use</strong>：
Use <code>&lt;caw:shortcut&gt;</code> in <code>&lt;form&gt;&lt;/form&gt;</code> to add a shortcut.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>shortcut</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ctrl shift i<span class="token punctuation">&quot;</span></span> <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.shortcut<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>messCode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{xxxBean.doShortcutAction}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>shortcut</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>Attributes</strong>:</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>key</td> <td>Shortcut's key</td></tr> <tr><td>event</td> <td>Shortcut's <code>code</code></td></tr> <tr><td>text</td> <td>Shortcut's <code>shortcutMess</code></td></tr> <tr><td>listener</td> <td>Listener that will be triggered by shortcut</td></tr></tbody></table> <h3 id="using-shortcut-in-javascript"><a href="#using-shortcut-in-javascript" class="header-anchor">#</a> Using shortcut in JavaScript</h3> <p>There is a variable <code>window.shortcut</code> to define the shortcut in JSF's view. Developers can use <code>registerShortcut(code, key, handler, mess)</code> to register a shortcut.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>shortcut<span class="token punctuation">.</span><span class="token function">registerShortcut</span><span class="token punctuation">(</span><span class="token string">'test.shortcutCode'</span><span class="token punctuation">,</span> <span class="token string">'ctrl shift t'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'test shortcut'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'messCode'</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Attributes</strong>:</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Shorcut's <code>code</code></td></tr> <tr><td>key</td> <td>Shorcut's trigger key</td></tr> <tr><td>handler</td> <td>Shorcut's handler</td></tr> <tr><td>mess</td> <td>Shorcut's <code>shortcutMess</code></td></tr></tbody></table> <h2 id="alert-development"><a href="#alert-development" class="header-anchor">#</a> Alert Development</h2> <h3 id="introduction-4"><a href="#introduction-4" class="header-anchor">#</a> Introduction</h3> <ul><li>Alert in System's Toolbar</li></ul> <p><img src="/assets/alert.jpg" alt="alert"></p> <ul><li><p>Alert List</p> <p><img src="/assets/alertlist.jpg" alt="alertlist"></p></li> <li><p>Alert Notification (Bottom Right Hand Corner)</p> <p><img src="/assets/alertpop.jpg" alt="alertpop"></p></li> <li><p>Alert Detail</p> <p><img src="/assets/alertview.jpg" alt="alertview"></p></li></ul> <h3 id="alert-implementation"><a href="#alert-implementation" class="header-anchor">#</a> Alert Implementation</h3> <p><strong>Sending an Alert</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//SysAlertUtil.java</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sendAlert</span><span class="token punctuation">(</span><span class="token class-name">SysAlertObj</span> alert<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> recipient<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre></div><p><code>SysAlertObj</code> is the basic object to describe the alert. Every type of alert required the specific <code>SysAlertObj</code>.</p> <p><strong>Attribute</strong>:</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>alert</td> <td><code>SysAlertObj</code>, data of the alert.</td></tr> <tr><td>recipient</td> <td>A Group of user's id.</td></tr></tbody></table> <h3 id="alert-development-2"><a href="#alert-development-2" class="header-anchor">#</a> Alert Development</h3> <p>Developers need to provide 3 components to display an alert, they are <code>Java Object</code>, <code>Alert List View and Notification View</code> as well as <code>Alert Details View</code>.</p> <h4 id="define-alert-java-object"><a href="#define-alert-java-object" class="header-anchor">#</a> Define Alert Java Object</h4> <p>Every Alert need a Java object to describe the details of the alert.</p> <p>This Java object need to inherit <code>SysAlertObj</code> and developers may need to pay attention to 4 points listed below:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//The below two methos must be implemented. Methods in CawJsonSerializable.</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">restoreJsonData</span><span class="token punctuation">(</span><span class="token class-name">String</span> jsonData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">//Base on jsonData, restore the Java object</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveJsonData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">//Transfer the current Java Object into Json String</span>
<span class="token punctuation">}</span>

<span class="token comment">//The below two methos can be implemented.</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessageText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">//Basic information of the alert (HTML not supported)</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDetailText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">//Details of the alert (HTML not supported)</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>Note</strong></p> <ul><li><code>saveJsonData</code> will transfer the current Java object into <code>JSON String</code>, however, the basic variable like <code>id</code> and <code>type</code> will not be included in the <code>JSON String</code>.</li></ul></blockquote> <p><strong><code>MessageAlert</code> Example</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SysAlert</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">,</span> rendererType <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageAlert</span> <span class="token keyword">extends</span> <span class="token class-name">SysAlertObj</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">TYPE</span> <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1729512694173799571L</span><span class="token punctuation">;</span>

	<span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span> detail <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> message<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> detail<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDetail</span><span class="token punctuation">(</span><span class="token class-name">String</span> detail<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>detail <span class="token operator">=</span> detail<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">/** overwrite methods **/</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">restoreJsonData</span><span class="token punctuation">(</span><span class="token class-name">String</span> jsonData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">JSONObject</span> jsonObj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">JSONObject</span><span class="token punctuation">)</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span>jsonObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setDetail</span><span class="token punctuation">(</span>jsonObj<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;detail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveJsonData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">JSONObject</span> jsonObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		jsonObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		jsonObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;detail&quot;</span><span class="token punctuation">,</span> <span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> jsonObj<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessageText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDetailText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="define-the-alert-view-renderer"><a href="#define-the-alert-view-renderer" class="header-anchor">#</a> Define the Alert View Renderer</h4> <p><strong>Alert View Renderer</strong> defined the view of the alert. There are two types of view for alert: <strong>List view</strong> and <strong>Detail View</strong>. As a result, the <strong>Renderer</strong> included two types of API.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SysAlertRender</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">encodeAlert</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">SysAlertItem</span> alert<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decodeAlert</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">SysAlertItem</span> alert<span class="token punctuation">,</span> <span class="token class-name">String</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">encodeAlertView</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">SysAlertItem</span> alert<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">encodeAlertTitle</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">SysAlertItem</span> alert<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">encodeHtmlText</span><span class="token punctuation">(</span>alert<span class="token punctuation">.</span><span class="token function">getAlertObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessageText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">encodeAlertContent</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">SysAlertItem</span> alert<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">encodeHtmlText</span><span class="token punctuation">(</span>alert<span class="token punctuation">.</span><span class="token function">getAlertObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDetailText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>API</strong></p> <ul><li><code>encodeAlert</code> is used to render the list view.</li> <li><code>decodeAlert</code> is used to handle the action triggered by the alert.</li> <li><code>encodeAlertView</code> is used to render the detail view.</li> <li><code>encodeAlertTitle</code> is not required and is used to simplify the alert. Use <code>String</code> (HTML supported) to show the title of the alert.</li> <li><code>encodeAlertContent</code> is not required and is used to describe the alert's content using <code>String</code> (HTML supported).</li></ul> <h5 id="note"><a href="#note" class="header-anchor">#</a> <strong>Note</strong></h5> <ol><li>Add a button and click event in the alert notification：</li></ol> <p>Use <code>data-action</code> in the view.</p> <div class="language-html extra-class"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAction<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-dismiss</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   myAction
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>Note：</p> <ul><li>The data in <code>data-action</code> will be passed to the 3rd parameter in <code>decodeAlert</code>.</li> <li><code>data-dismiss</code> is optional. When <code>true</code>, the alert list will be dismissed once the user click the button.</li></ul></blockquote> <ol start="2"><li>Use of <code>AbstractAlertRender</code></li></ol> <p>To simplify the development, aiM18 provided a basic class <code>AbstractAlertRender</code>. Developers can implement it or create another for its own use.</p> <p><code>AbstractAlertRender</code> render the alert list as follows:</p> <p><img src="/assets/alertui1.jpg" alt="alertui1"></p> <p>There are 4 parts：<strong>Icon Area</strong>、<strong>Title Area</strong>、<strong>Content Area</strong>、<strong>Time Stamp</strong>。</p> <ul><li><strong>Icon Area</strong>: defined in <code>getIcon()</code></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">ImageObject</span> <span class="token function">getIcon</span><span class="token punctuation">(</span><span class="token class-name">SysAlertItem</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Title Area</strong>: 3 different methods to render the title
<ul><li>Override the method <code>getMessageText()</code> in <code>SysAlertObj</code>. HTML not supported.</li> <li>Override the method <code>encodeAlertTitle</code> in the renderer class. HTML supported.</li> <li>Override the method <code>encodeTitle</code> in <code>AbstractAlertRender</code>.</li></ul></li> <li><strong>Content Area</strong>: 3 different methods to render the content
<ul><li>Override the method <code>getDetailText()</code> in <code>SysAlertObj</code>. HTML not supported.</li> <li>Override the method <code>encodeAlertContent</code> in the renderer class. HTML supported.</li> <li>Override the method <code>encodeItemContent</code> in <code>AbstractAlertRender</code></li></ul></li> <li><strong>Time Stamp</strong>: There are no method to override the time.</li></ul> <ol start="3"><li><p>Development of Alert Detail View</p> <p>Developers can implement <code>encodeAlertView</code> to define the detail view of alerts.</p> <p>If developers used <code>AbstractAlertRender</code>, separated JSF can be created to design the detail view:</p> <ul><li>Override <code>getViewUrl</code> to define a JSF view.</li></ul></li></ol> <div class="language-java extra-class"><pre class="language-java"><code>     <span class="token keyword">protected</span> <span class="token class-name">String</span> <span class="token function">getViewUrl</span><span class="token punctuation">(</span><span class="token class-name">SysAlertItem</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token string">&quot;/view/alert/messageAlert.faces&quot;</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
</code></pre></div><ul><li>Create a JSF view. Use <code>#{alertItem}</code> in the view to get the Java object <code>SystemAlertItem</code> if necessary.</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>ID : #{alertItem.id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Title : #{alertItem.alertObj.messageText}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Detail : #{alertItem.alertObj.detailText}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="register-the-java-object-and-renderer"><a href="#register-the-java-object-and-renderer" class="header-anchor">#</a> Register the JAVA Object and Renderer</h4> <p>JAVA object and renderer need to be registered in aiM18. The JAVA object need to register with a registered renderer.</p> <p><strong>How to Register</strong></p> <p>Method 1： Using <code>faces.xml</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sysalert-config</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rendererType</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.alert.message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    com.multiable.web.sysalert.render.MessageAlertRender
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rendererType</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sysalert</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.alert.message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span><span class="token punctuation">&gt;</span></span>className<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>renderer</span><span class="token punctuation">&gt;</span></span>com.multiable.alert.message<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>renderer</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sysalert</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sysalert-config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p><strong>Note：</strong></p> <ol><li><p>All settings must be put within the tag <code>sysalert-config</code>.</p></li> <li><p>Register the rendere using <code>&lt;rendererType name=&quot;code&quot;&gt;className&lt;/rendererType&gt;</code>.</p> <p><code>code</code> must be unique in the system.</p> <p><code>className</code> must be a renderer implemented <code>SysAlertRender</code>.</p></li> <li><p>Register the Java object using <code>&lt;sysalert name=&quot;code&quot;&gt;&lt;object&gt;className&lt;/object&gt;&lt;/sysalert&gt;</code>.</p> <p><code>code</code> must be unique in the system.</p> <p><code>className</code> must be of type <code>SysAlertObj</code>.</p></li> <li><p>When registering the Java object, a renderer must be used using <code>&lt;renderer&gt;renderCode&lt;/renderer&gt;</code>.</p> <p>The render must already be registered.</p></li></ol></blockquote> <p>Method 2： Using Annotation in JAVA</p> <ul><li>Register Renderer</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token annotation punctuation">@SysAlertRenderer</span><span class="token punctuation">(</span>rendererType <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageAlertRender</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractAlertRender</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>Use annotation <code>@SysAlertRenderer</code> in the renderer class. <code>rendererType</code> is the name of the renderer and must be unique in system.</p> <ul><li>Register Java Object</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token annotation punctuation">@SysAlert</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">,</span> 
            rendererType <span class="token operator">=</span> <span class="token string">&quot;com.multiable.alert.message&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageAlert</span> <span class="token keyword">extends</span> <span class="token class-name">SysAlertObj</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>Use annotation <code>@SysAlert</code> in the Java object class. <code>value</code> is the name of the Java object and must be unique in system. <code>rendererType</code> used to define a registered renderer class.</p> <h2 id="link-s-rules"><a href="#link-s-rules" class="header-anchor">#</a> Link's Rules</h2> <h3 id="introduction-5"><a href="#introduction-5" class="header-anchor">#</a> Introduction</h3> <div class="language-http extra-class"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//192.168.10.214:8080/jsf/app.faces#employee/view/module/employee/870f5fee?id=63</span></span>
</code></pre></div><p>In aiM18，different information is included in the link:</p> <ul><li><p>Information about the protocol, server host and port used. (<code>http://192.168.10.214:8080</code>)</p></li> <li><p>aiM18's item path. (<code>/jsf</code>)</p></li> <li><p>aiM18's system resource path. Relative to item path. (<code>/app.faces</code>)</p></li> <li><p>Editor's information. (<code>#menuCode/resourcePath/randomKey</code>)</p> <p><code>menuCode</code>：<code>code</code> of <code>menu</code>. Defined in <code>navmenu.xml</code>.</p> <p><code>resourcePath</code>: path of the editor. Using <code>employee</code> as an example, its JSF view's path is <code>view/module/employee.xhtml</code>, therefore, its <code>resourcePath</code> is <code>view/module/employee</code>.</p> <p><code>randomKey</code> is generated by the system.</p></li> <li><p>Parameters (<code>?id=63)</code>)</p></li></ul> <h3 id="get-the-system-link"><a href="#get-the-system-link" class="header-anchor">#</a> Get the System Link</h3> <p>Use the following snippet to retrieve the link of a desired frame.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">getFrameLink</span><span class="token punctuation">(</span><span class="token class-name">String</span> menuCode<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="about-link-s-parameters"><a href="#about-link-s-parameters" class="header-anchor">#</a> About Link's Parameters</h3> <p>If a view need to support parameters, developers need to get and decode the parameters in Java. In practice, analyzing parameters is done in method <code>initalized</code> in <code>ViewListener</code>.</p> <h2 id="use-of-push"><a href="#use-of-push" class="header-anchor">#</a> Use of PUSH</h2> <p>PUSH is a method in which the server send information to font-end. aiM18 has packaged the PUSH method and provided a simple API for developers.</p> <p>PUSH, involving font-end and back-end, works as follow:</p> <ol><li>Font-end send a connection to back-end.</li> <li>Back-end use Java service to listen the connection and process the information transferred.</li> <li>Front-end or Back-end close the connection.</li></ol> <h3 id="front-end"><a href="#front-end" class="header-anchor">#</a> Front-end</h3> <p>In JavaScript, developers can use <code>myView.createWebSocket(name, option, params)</code> to create a web-socket connection.</p> <ul><li><p><code>name</code>： Should be the same as the back-end service name.</p></li> <li><p><code>option</code>:  A list of function supported like <code>onmessage</code>、<code>onerror</code>、<code>onclose</code>.</p></li> <li><p><code>params</code>： Parameters send to backend.</p></li></ul> <h3 id="backend"><a href="#backend" class="header-anchor">#</a> Backend</h3> <ul><li>Extend <code>CawWebSocket</code></li> <li>Use the annotation <code>@ServerEndpoint</code>. <code>name</code> should be the same as the <code>name</code> in front-end.</li> <li>Parameters passed by front-end can be found under the method <code>onOpen</code>.</li></ul> <h3 id="example"><a href="#example" class="header-anchor">#</a> Example</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ServerEndpoint</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/sysAlert&quot;</span><span class="token punctuation">,</span> encoders <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token class-name">SysAlertEncoder</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysAlertWebSocket</span> <span class="token keyword">extends</span> <span class="token class-name">CawWebSocket</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getUid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Long</span> id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span> <span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;uid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOpen</span><span class="token punctuation">(</span><span class="token class-name">Session</span> session<span class="token punctuation">,</span> <span class="token class-name">EndpointConfig</span> ec<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		<span class="token class-name">String</span> userId <span class="token operator">=</span> <span class="token function">getRequestParam</span><span class="token punctuation">(</span>session<span class="token punctuation">,</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>userId <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;uid&quot;</span><span class="token punctuation">,</span> <span class="token class-name">ConvertLib</span><span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSocketKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">long</span> id <span class="token operator">=</span> <span class="token function">getUid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSupportCluster</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> option <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
option<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
option<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>webSocket <span class="token operator">=</span> myView<span class="token punctuation">.</span><span class="token function">createWebSocket</span><span class="token punctuation">(</span><span class="token string">'sysAlert'</span><span class="token punctuation">,</span> option<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">userId</span> <span class="token operator">:</span> uid<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="common-api"><a href="#common-api" class="header-anchor">#</a> Common API</h3> <p><strong>Push Messages to Front-end</strong></p> <p>Developers can find useful API in <code>WebSocketUtil.java</code>：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> webSocket<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CawWebSocket</span><span class="token punctuation">&gt;</span></span> filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sendObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> webSocket<span class="token punctuation">,</span> <span class="token class-name">Object</span> message<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CawWebSocket</span><span class="token punctuation">&gt;</span></span> filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sendText</span><span class="token punctuation">(</span><span class="token class-name">String</span> webSocket<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keyPredicate<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>Note</strong>：</p> <ul><li>Parameter <code>webSocket</code> is the value of <code>value</code> of the annoation <code>@ServerEndpoint</code>.</li> <li>The 3rd parameter <code>filter</code> and <code>keyPredicate</code> is used to define which websocket the information will be send.</li> <li>The 2nd parameter is used to defind the information, in text, need to send. If <code>sendObject</code> is used, attribute <code>encoders</code> should be added in annotation <code>@serverEndpoint</code> to encode the object into text.</li> <li><strong>Important</strong>: If aiM18 is inside a clustering architecture, only <code>sendText</code> can be used to send message to multiple server.</li></ul></blockquote> <h2 id="home-s-components-development"><a href="#home-s-components-development" class="header-anchor">#</a> Home's Components Development</h2> <p>In aiM18's home, there are two components that can be extended.</p> <ul><li><code>spotlight</code>: In the main tool bar, while users search the menu using the search bar, spotlight component will be triggered. <code>spotlight</code> will base on user input, search in aiM18 and display the result on the screen.</li> <li><code>widget</code>：Used to display a specific view. User can use developed <code>widget</code> and display it in Home using UDF layout.</li></ul> <h3 id="spotlight-component"><a href="#spotlight-component" class="header-anchor">#</a> Spotlight Component</h3> <p><code>spotlight</code>'s functions'：<strong>Searching</strong> and <strong>Display Result</strong>。</p> <p>Therefore, <code>spotlight</code> component include two parts for development.</p> <h4 id="searching"><a href="#searching" class="header-anchor">#</a> Searching</h4> <p><code>spotlight</code> use interface <code>SpotlightHelper</code> to implement the function <strong>Searching</strong>，keywords and result will be transferred during searching using <code>CawSpotlight</code>.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SpotlightHelper</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSearch</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">CawSpotlight</span> spotlight<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">spotlightInit</span><span class="token punctuation">(</span><span class="token class-name">FaceletContext</span> ctx<span class="token punctuation">,</span> <span class="token class-name">CawSpotlight</span> spotlight<span class="token punctuation">,</span> 	<span class="token class-name">UIComponent</span> container<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>Note</strong></p> <ul><li><code>spotlightInit</code> will be triggered when <code>spotlight</code> initalized.</li> <li><code>doSearch</code> will be triggered when user input keywords.</li> <li><code>CawSpotlight</code> includes all the information about the component and about the searching.</li> <li><code>CawSpotlight.setRendered(boolean rendered)</code> can be used to indicate if the component should be visible. For example, if the search result is empty, change the component to be invisible using this method.</li></ul></blockquote> <p><strong>Define the Rendered Variables &amp; Return Search Result</strong></p> <p><code>spotlight</code> component need to search in aiM18, return the result and variables in order to determine how the search result will be presented.</p> <p>Using <code>CawSpotlight.setData(String key, Object obj)</code> to return the result and variables.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSearch</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">CawSpotlight</span> spotlight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> searchKey <span class="token operator">=</span> spotlight<span class="token punctuation">.</span><span class="token function">getSearchKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">NavMenuItem</span><span class="token punctuation">&gt;</span></span> items <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// do search with searchKey</span>
    spotlight<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">&quot;searchResult&quot;</span><span class="token punctuation">,</span> items<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set result to spotlight</span>
    spotlight<span class="token punctuation">.</span><span class="token function">setRendered</span><span class="token punctuation">(</span>items<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In the page of search result, developers can use <code>#{content.data.key}</code> to access the variables defined by <code>setData</code>. <code>key</code> is the <code>key</code> in <code>setData</code>.</p> <h4 id="search-result-display"><a href="#search-result-display" class="header-anchor">#</a> Search Result Display</h4> <p>Use a JSF file to define the view of <code>spotlight</code>. As <code>spotlight</code> is a component, <code>&lt;view&gt;, &lt;body&gt;, &lt;form&gt;</code> tags should not exists and the view should be encoded in <code>&lt;ui:composition&gt;&lt;/ui:composition&gt;</code>.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/1999/xhtml<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>f</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/jsf/core<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>h</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/jsf/html<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>ui</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/jsf/facelets<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>caw</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.cloud-at-work.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">ui:</span>composition</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>outputScript</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu.min.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">library</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>js/spotlight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>outputScript</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>outputStylesheet</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu.min.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">library</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>css/spotlight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>outputStylesheet</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container spotlight-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>#{caw:mess('spotlight.menu')}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>menuSpotlight</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{content.data.searchResult}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>menuSpotlight</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">ui:</span>composition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="spotlight-registration"><a href="#spotlight-registration" class="header-anchor">#</a> Spotlight Registration</h4> <p>Register <code>spotlight</code> in <code>app.xml</code>.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spotlight</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>share.spotlight.menu<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/spotlight/menu.xhtml<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">helper</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.spotlight.MenuSpotlight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spotlight</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>spotlight</code> Attributes</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td><code>spotlight</code> name，Unqiue Key.</td></tr> <tr><td>mess</td> <td><code>spotlight</code> description， <code>messCode</code></td></tr> <tr><td>src</td> <td><code>spotlight</code> jsf file</td></tr> <tr><td>helper</td> <td><code>spotlight</code> helper class</td></tr></tbody></table> <h3 id="widget-component"><a href="#widget-component" class="header-anchor">#</a> Widget Component</h3> <p>Unlike <code>spotlight</code>, <code>widget</code> does not need to trigger by user. After a <code>widget</code> have been setup in Home. It will be displayed in the interface when aiM18 is re-opened.</p> <p><code>widget</code> component includes two views: **Setting (Optional) ** and <strong>Display</strong>.</p> <h4 id="display-view"><a href="#display-view" class="header-anchor">#</a> Display View</h4> <p>Developers can provide a Java class, implemented <code>WidgetHelper</code>, to prepare data in <strong>Display</strong>.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">WidgetHelper</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">prepareWidget</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">CawWidgetContent</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">widgetInit</span><span class="token punctuation">(</span><span class="token class-name">FaceletContext</span> ctx<span class="token punctuation">,</span> <span class="token class-name">CawWidgetContent</span> content<span class="token punctuation">,</span> <span class="token class-name">UIComponent</span> container<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>Note</strong></p> <ul><li><code>widgetInit</code> only triggered when <code>widget</code> initialized.</li> <li><code>prepareWidget</code> triggered when <code>widget</code> is displayed, used in order to refresh the data.</li> <li><code>CawWidgetContent</code> used to retrieve all the information about the <code>widget</code>.</li></ul></blockquote> <p>Developers can use <code>#{content.data.key}</code> to access the variable definded by <code>CawWidgetContent.setData(String key, Object obj)</code>. <code>key</code> is the <code>key</code> in <code>setData</code>.</p> <p>Use a JSF file to define the view of <strong>Display</strong>. As <strong>Display</strong> is a component, <code>&lt;view&gt;, &lt;body&gt;, &lt;form&gt;</code> tags should not exists and the view should be encoded in <code>&lt;ui:composition&gt;&lt;/ui:composition&gt;</code>.</p> <h4 id="setting-view"><a href="#setting-view" class="header-anchor">#</a> Setting View</h4> <p><strong>Setting</strong> need a Java object to store the setting information, the Java object should be able to transfer between Json and Java Object using <code>JSON.toJSONString</code> and <code>JSON.parseObject</code>. POJO object or Java object implemented <code>CawJsonSerializable</code> is recommended.</p> <p>Use a JSF file to define the view of <strong>Setting</strong>. Use <code>#{content.option}</code> to get the <code>widget</code> setting object. As <strong>Setting</strong> is a component, <code>&lt;view&gt;, &lt;body&gt;, &lt;form&gt;</code> tags should not exists and the view should be encoded in <code>&lt;ui:composition&gt;&lt;/ui:composition&gt;</code>.</p> <p><strong>Setting</strong> view can link to a Java Bean which implemented <code>WidgetOptionBean</code>.</p> <h4 id="registration-2"><a href="#registration-2" class="header-anchor">#</a> Registration</h4> <p>Register <code>widget</code> in <code>app.xml</code>.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>widget</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linkWidget<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>widget.linkWidget<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/widget/linkWidget.xhtml<span class="token punctuation">&quot;</span></span> 
            <span class="token attr-name">helper</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.widget.LinkWidget<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linkWidget.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">library</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img/widget<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>icon</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span> <span class="token attr-name">mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>widget.linkWidget.description<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token cdata">&lt;![CDATA[&lt;p&gt;A widget to show a link with an image!&lt;/p&gt;]]&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/view/widget/linkWidgetOption.xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          com.multiable.web.widget.LinkOption
      	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>widget</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">&gt;</span></span>	
</code></pre></div><p><code>widget</code> Attributes</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td><code>widget</code> name. Unique key.</td></tr> <tr><td>mess</td> <td><code>widget</code> description. <code>messCode</code></td></tr> <tr><td>src</td> <td><code>widget</code> JSF file</td></tr> <tr><td>helper</td> <td><code>widget</code> Java class helper</td></tr> <tr><td>width</td> <td><code>widget</code> default width (Max: 12)</td></tr> <tr><td>height</td> <td><code>widget</code> default height (Default: 30px)</td></tr></tbody></table> <p><code>&lt;icon/&gt;</code> is to define the icon of the widget.</p> <p><code>&lt;description&gt;&lt;/description</code> is to define the description of the widget. Use <code>messcode</code> in attribute <code>mess</code> or input text in attribute <code>description</code> to define the descrption. HTML supported.</p> <p><code>&lt;option src=&quot;resourcePath&quot;&gt;className&lt;/option&gt;</code> used to define the <code>widget</code>'s setting information. Attribute <code>src</code> define the path for the view while <code>className</code> define the Java Object used in the setting.</p> <h2 id="theme-development"><a href="#theme-development" class="header-anchor">#</a> Theme Development</h2> <h3 id="introduction-6"><a href="#introduction-6" class="header-anchor">#</a> Introduction</h3> <h4 id="type-of-theme"><a href="#type-of-theme" class="header-anchor">#</a> Type of Theme</h4> <p>aiM18 divided theme into <strong>System Theme</strong> and <strong>UDF Theme</strong>.</p> <ul><li><p>System Theme: Can only be modified by developers.</p></li> <li><p>UDF Theme: Can be modified by user. Every user can have one UDF Theme. Users can use the current theme as template, select their desired color and save as an UDF Theme.</p> <p><img src="/assets/theme.jpg" alt="theme"></p></li></ul> <h5 id="user-definded"><a href="#user-definded" class="header-anchor">#</a> User Definded</h5> <p>aiM18 provided a &quot;Theme Color Palette&quot; which included a set of <strong>Color Variable</strong>. User can define different colors to different <strong>Color Variables</strong> such that the component using those <strong>Color Variable</strong>s will be changed together.</p> <p><strong>Color Variable</strong> includes</p> <ul><li><p><strong>aiM18 System Basic Color Variable</strong></p> <p><code>Primary</code>、<code>Info</code>、<code>Warning</code>、<code>Danger</code>、<code>Success</code></p> <p>aiM18 also provide other <strong>Color Variables</strong> to control component colors like <code>System Text Color</code>, <code>Required Field Color</code>, etc.</p></li> <li><p><strong>Special Page Color Variable</strong></p> <p>aiM18 provide <strong>Color Variable</strong> for Home Page such that user can choose their own color.</p></li> <li><p><strong>Developer Color Variable</strong></p> <p>Developer can defined <strong>Color Variable</strong> and use it in specific pages.</p></li></ul> <p><img src="/assets/themeui.jpg" alt="themeui"></p> <h3 id="create-modify-theme-css-file"><a href="#create-modify-theme-css-file" class="header-anchor">#</a> Create/Modify Theme CSS File</h3> <p><strong>Theme CSS File</strong> is necessary only when <strong>the page color should change base on the theme</strong></p> <h4 id="naming-and-path-rules"><a href="#naming-and-path-rules" class="header-anchor">#</a> Naming and Path Rules</h4> <ul><li><strong>Theme css File</strong> must put under <code>WebContent/resources/themes/</code>.</li> <li><strong>Theme css File Name</strong> must be in the form of <code>*.dynamic.css</code>. (<code>*</code> is any words)</li></ul> <h4 id="how-to-writing-a-css-file"><a href="#how-to-writing-a-css-file" class="header-anchor">#</a> How to Writing a CSS File</h4> <div class="language-css extra-class"><pre class="language-css"><code>
<span class="token selector">//set</span> <span class="token punctuation">{</span>app-header-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>primary<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-logo-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>app-header-background + 10%<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-header-color<span class="token punctuation">}</span> <span class="token selector">= #fafafa
set</span> <span class="token punctuation">{</span>app-header-active-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>app-header-background + 10%<span class="token punctuation">}</span>
<span class="token selector">//set</span> <span class="token punctuation">{</span>app-menu-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>darkGray-<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-menu-color<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>lightGray<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-menu-active-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>app-menu-background + 40%<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-menu-active-color<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>app-menu-color - 50%<span class="token punctuation">}</span>
<span class="token selector">//set</span> <span class="token punctuation">{</span>app-tab-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>body-bg<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-active-tab<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>warning * 0.5<span class="token punctuation">}</span>
<span class="token selector">set</span> <span class="token punctuation">{</span>app-notice-tab<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>primary * 0.3<span class="token punctuation">}</span>
<span class="token selector">//set</span> <span class="token punctuation">{</span>app-homepage-background<span class="token punctuation">}</span> <span class="token selector">=</span> <span class="token punctuation">{</span>body-bg<span class="token punctuation">}</span>

<span class="token selector">.theme-</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> <span class="token selector">.main-container,
.theme-</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> <span class="token selector">.main-container:before</span> <span class="token punctuation">{</span>
	<span class="token selector">background-color:</span> <span class="token punctuation">{</span>app-homepage-background<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.theme-</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> <span class="token selector">#header.header-container</span> <span class="token punctuation">{</span>
  <span class="token selector">background-color:</span> <span class="token punctuation">{</span>app-header-background<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.theme-</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> <span class="token selector">#header.header-container header.top-header .logo</span> <span class="token punctuation">{</span>
  <span class="token selector">background-color:</span> <span class="token punctuation">{</span>app-logo-background<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.theme-</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> <span class="token selector">#header.header-container header.top-header .header-link</span> <span class="token punctuation">{</span>
  <span class="token selector">color:</span> <span class="token punctuation">{</span>app-header-color<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>Define a variable： <code>set {Variable Name} = Value</code></p> <p><code>value</code> can be a defined value or other variables. If other variables are used, <code>{Other Variable Name}</code> have to be used.</p></li> <li><p>Operator:<code>-</code>,<code>+</code>,<code>*</code></p> <p><code>-</code>: Color fades. Use <code>a%</code> at the back in which <code>a</code> is a number between <code>0-100</code>.</p> <p><code>+</code>: Color darker. Use <code>a%</code> at the back in which <code>a</code> is a number between <code>0-100</code>.</p> <p><code>*</code>: Transparency，Define a number at the back.</p></li> <li><p>Using Variable</p> <p>Use <code>{Variable Name}</code> in css file.</p></li></ul> <h4 id="predefined-variables"><a href="#predefined-variables" class="header-anchor">#</a> Predefined Variables</h4> <ul><li>System Basic Color Variables：</li></ul> <p><code>primary</code>、<code>info</code>、<code>warning</code>、<code>danger</code>、<code>success</code>、<code>gray</code>、<code>lightGray</code>、<code>darkGray</code></p> <p>The above color variables includes two additional variables for color tunning. Use <code>primary</code> as an example, there exists two variables called <code>primary-</code>，<code>primary+</code>.</p> <ul><li><p>Bootstrap Color Variable</p> <p>Ref: <code>WebContent/themes/css/caw.variable.dynamic.css</code></p></li></ul> <h3 id="adding-a-theme"><a href="#adding-a-theme" class="header-anchor">#</a> Adding a Theme</h3> <p>Define <code>&lt;theme-config&gt;</code> in <code>faces.xml</code>.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>faces</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>theme-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>theme</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blue<span class="token punctuation">&quot;</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.blue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 	
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#2D7DD2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#3BAFDA<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>warning<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#EEB902<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>danger<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#F45D01<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>success<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#97CC04<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-homepage-background<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#f9f9f9<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>token</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-bg-disabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{lightGray}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>token</span><span class="token punctuation">&gt;</span></span>
	 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>theme</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>theme-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>faces</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>To configure a theme-palette, at least 5 basic colors need to be defined.</p> <p><strong><code>theme</code> Attributes</strong>:</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Unique Key</td></tr> <tr><td>description</td> <td>Description in <code>messCode</code> format</td></tr></tbody></table> <p><code>&lt;color&gt;</code> defined the color variable. <code>name</code> is the variable name， <code>value</code> is the value.</p> <p><code>&lt;token&gt;</code> defined the relation between the color variables. <code>key</code> is the variable name, <code>value</code> is an expression of the other variable.</p> <h3 id="supporting-udf-theme-in-editor"><a href="#supporting-udf-theme-in-editor" class="header-anchor">#</a> Supporting UDF Theme in Editor</h3> <h4 id="registration-3"><a href="#registration-3" class="header-anchor">#</a> Registration</h4> <p>Define <code>&lt;specification&gt;</code> tag under <code>&lt;theme-config&gt;</code> in <code>faces.xml</code>.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>faces</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>theme-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>specification</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.spec.app<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">demo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/view/theme/appDemo.xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>token</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-header-background<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{primary}<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.app.header.bg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>token</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-tab-background<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{body-bg}<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.app.tab.bg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>token</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-menu-background<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{darkGray-}<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.app.menu.bg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>token</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-homepage-background<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{body-bg + 5%}<span class="token punctuation">&quot;</span></span> 
             <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme.app.homepage.bg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme/app.dynamic.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">library</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>themes/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>specification</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>theme-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>faces</span><span class="token punctuation">&gt;</span></span>	 
</code></pre></div><p><strong><code>specification</code> Attributes</strong>:</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Unique Key</td></tr> <tr><td>description</td> <td>Description in <code>messCode</code> format.</td></tr> <tr><td>demo</td> <td>Example file</td></tr></tbody></table> <p><strong><code>token</code> Attributes</strong>:</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>key</td> <td>Variable Name</td></tr> <tr><td>value</td> <td>Default Value. Must use the system-definded variable.</td></tr> <tr><td>description</td> <td>Description in <code>messCode</code> format.</td></tr></tbody></table> <p><code>resource</code> used to define the css file.</p> <h4 id="create-use-of-css-file"><a href="#create-use-of-css-file" class="header-anchor">#</a> Create/Use of CSS File</h4> <p>Theme CSS File is a dynamic.css file. Please refer to [Writing Them CSS File](#Writing Them CSS File) for more details.</p> <h4 id="create-demo-page"><a href="#create-demo-page" class="header-anchor">#</a> Create Demo Page</h4> <p>Demo page is a JSF file, following the rules of developing JSF will be enough. However, <code>&lt;view&gt;, &lt;body&gt;, &lt;form&gt;</code> should not be used and all the tags must put within <code>&lt;ui:composition&gt;</code>.</p> <h2 id="extension-of-existing-functions"><a href="#extension-of-existing-functions" class="header-anchor">#</a> Extension of Existing Functions</h2> <h3 id="extension-of-editor"><a href="#extension-of-editor" class="header-anchor">#</a> Extension of Editor</h3> <p><strong>Extension of Editor</strong> refer to create a new function based on the existing editor.</p> <h4 id="registration-of-extension"><a href="#registration-of-extension" class="header-anchor">#</a> Registration of Extension</h4> <p>Register the <strong>Extension of Editor</strong> in <code>app.xml</code>.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>extension</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formComp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>caw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">filter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>frame<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>controller</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>controller</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page</span><span class="token punctuation">&gt;</span></span>/extension/extensionTest.xhtml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>caw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">filter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>frame<span class="token punctuation">&quot;</span></span> <span class="token attr-name">apDebug</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page</span><span class="token punctuation">&gt;</span></span>/extension/extensionEmployee.xhtml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>extension</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">&gt;</span></span>	
</code></pre></div><ul><li><code>&lt;view&gt;</code> defined the view need to extend.</li> <li><strong>Attributes</strong>:</li></ul> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>code</td> <td>Target view's code. <code>code</code> is the <code>code</code> defined in <code>navmenu.xml</code>.</td></tr> <tr><td>app</td> <td>The app name where the view's is in.</td></tr> <tr><td>filter</td> <td>Filter the menu code which are needed to apply the extension.</td></tr> <tr><td>type</td> <td>Type of target view. Options: <code>frame</code>,<code>dialog</code>,`namecard</td></tr></tbody></table> <p><code>ViewFilter</code> Interface：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ViewFilter</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isViewIncluded</span><span class="token punctuation">(</span><span class="token class-name">ViewExtension</span> extension<span class="token punctuation">,</span> <span class="token class-name">ViewType</span> type<span class="token punctuation">,</span> <span class="token class-name">String</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>ViewFilter</code> is used to indicate if the view needed to apply the extension. Return <code>true</code> to apply.</p> <ul><li><code>&lt;controller&gt;</code> define a <code>controller</code> for the extension. Controller must extend one of the following class base on the Java type of the target view： <code>ViewControllerWrapper</code>、<code>DialogControllerWrapper</code>、<code>FrameControllerWrapper</code>、<code>ModuleControllerWrapper</code></li> <li><code>&lt;page&gt;</code> define a <code>XHTML</code> for the extension.</li> <li><code>&lt;listener&gt;</code> define a <code>ViewListener</code> for the extension.</li></ul> <h4 id="extension-of-tags-adding-a-new-component"><a href="#extension-of-tags-adding-a-new-component" class="header-anchor">#</a> Extension of Tags &amp; Adding a New Component</h4> <p>Before the start of an extension, target, exists in the original view,  need to be definded in which the extension should take place.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>targetId<span class="token punctuation">&quot;</span></span><span class="token attr-name">,</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before|after|prepend|append<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>action</code> defined the position in which the extension should take place:</p> <ul><li><strong>before</strong> : Extension take place in front of the target. The new component is grouped under the same parent tag.</li> <li><strong>after</strong>：Extension take place after the target. The new component is grouped under the same parent tag.</li> <li><strong>prepend</strong>：Extension take place before the first child tag of the target component.</li> <li><strong>append</strong>： Extension take place after the last child tag of the target component.</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--Add a button in front of the component with id = `code` --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>commandButton</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Extend Button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>commandButton</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prepend<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  	<span class="token comment">&lt;!--Add a click event to the button --&gt;</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>ajax</span> <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span> <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxbean.doAction<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>ajax</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="extend-modify-component-s-attributes"><a href="#extend-modify-component-s-attributes" class="header-anchor">#</a> Extend/Modify Component's Attributes</h4> <p>Same as the previous session, modifying the attributes of an existing components need <code>&lt;caw:extendComponent&gt;</code> to define the target component. However, attribute <code>action</code> can be ignored.</p> <div class="language-xml extra-class"><pre class="language-xml"><code>//Original View
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">columnName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>border: 1px solid blue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>

//Extension View
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee_code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>background-color: red;<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">updateType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>extend<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Use <code>&lt;caw:setProperty&gt;</code> to modify the target's attributes. Attributes:</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td>Attribute name</td></tr> <tr><td>value</td> <td>New attribute value</td></tr> <tr><td>updateType</td> <td>Extension method. Options:<code>extend</code>, <code>replace</code></td></tr></tbody></table> <p><strong>For <code>style</code>, <code>styleClass</code></strong>：</p> <p>Use the above XML as an example, <code>style</code> will be the combination of the existing style and new style. The component will be shown as follow:</p> <p><img src="/assets/extprop.jpg" alt="extprop"></p> <p>If the code modified like:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee_code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>background-color: red;<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">updateType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>replace<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The target component will only have one style and result will be shown as follow:</p> <p><img src="/assets/extprop1.jpg" alt="extprop1"></p> <p><strong>For other Attributes</strong>:
If the attribute's <code>value</code> is a <code>literalValue</code>, not an <code>EL expression</code>, the  original value will be replaced by the new value (<code>updateType</code>=<code>replace</code>). <code>value</code> can be extended (<code>updateType</code>=<code>extend</code>) only when <code>value</code> is used as an <code>EL expression</code>.</p> <div class="language-xml extra-class"><pre class="language-xml"><code>//Original View
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span> <span class="token attr-name">columnName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

//Extension View
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee_code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>background-color: red;<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">updateType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>replace<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxlength<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>15<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Before extend <code>maxlength</code>：</p> <p><img src="/assets/extprop2.jpg" alt="extprop2"></p> <p>After extension, the maxlength changed to 15</p> <p><img src="/assets/extprop3.jpg" alt="extprop3"></p> <p>If the extension modified as follow:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>extendComponent</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee_code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>background-color: red;<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">updateType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>replace<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>setProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxlength<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{xxxBean.testProperty(VALUE)}<span class="token punctuation">&quot;</span></span> 
                    <span class="token attr-name">updateType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>extend<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>extendComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//xxxBean</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">testProperty</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>EL expression</code> is used in the extension, <code>VALUE</code> inside the EL expression represent the original value.</p> <p><img src="/assets/extprop4.jpg" alt="extprop4"></p> <p>If <code>replace</code> is used for the attribute <code>updateType</code>, <code>VALUE</code> will become 0.</p> <p><img src="/assets/extprop5.jpg" alt="extprop5"></p> <h3 id="decorator"><a href="#decorator" class="header-anchor">#</a> Decorator</h3> <h4 id="introduction-7"><a href="#introduction-7" class="header-anchor">#</a> Introduction</h4> <p>Decorator, is an interface, provided to modify/interact with the result in a function. Decorators should be defined only when the result of a function or the process is expected to be modified/interrupted by third parties.</p> <p>To create/use a decorator:</p> <ol><li>Define a decorator (an interface);</li> <li>Enable this decorator in Java.</li></ol> <p>Two usages in decorator:</p> <ul><li>Event Type: Notify all registered decorators to do an action.</li> <li>Extension Type: Notify all registered decorators to run a function and return a value to the original function.</li></ul> <h4 id="define-a-decorator"><a href="#define-a-decorator" class="header-anchor">#</a> Define a decorator</h4> <ul><li>Define an interface which extend <code>ViewDecorator</code>.</li> <li>Define API which expected the method is used by third parties.
Example: Version Compare Decorator</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">VersionCompareDecorator</span> <span class="token keyword">extends</span> <span class="token class-name">ViewDecorator</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FieldLocator</span><span class="token punctuation">&gt;</span></span> <span class="token function">versionCompare</span><span class="token punctuation">(</span><span class="token class-name">SqlEntity</span> entity<span class="token punctuation">,</span> <span class="token class-name">SqlEntity</span> comparedEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="enable-a-decorator"><a href="#enable-a-decorator" class="header-anchor">#</a> Enable a Decorator</h4> <p>After defined a decorator, the decorator need to be enabled in the Java files which is needed to be extended.
There are two methods to enable the decorator:</p> <ol><li>Even Type:</li></ol> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token comment">//ViewController</span>
  <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">ViewDecorator</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">notifyDecorator</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> target<span class="token punctuation">,</span> <span class="token class-name">DecorateAction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params<span class="token punctuation">)</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>  controller<span class="token punctuation">.</span><span class="token function">notifyDecorator</span><span class="token punctuation">(</span><span class="token class-name">MyDecorator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> 
                            <span class="token punctuation">(</span>decorator<span class="token punctuation">,</span> params<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> decorator<span class="token punctuation">.</span><span class="token function">myDecoratorAction</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> params<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                             <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>param1<span class="token punctuation">,</span> param2<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p><code>target</code>: Java class of the decorator. For example: <code>VersionCompareDecorator</code>.</p></li> <li><p><code>action</code>: Event interface class implemented <code>DecorateAction</code>. Example:</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DecorateAction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAction</span><span class="token punctuation">(</span><span class="token class-name">T</span> decorator<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><ul><li><code>params</code>: Used to pass the parameters needed in <code>DecorateAction</code>.</li></ul> <ol start="2"><li>Extension Type:</li></ol> <div class="language-java extra-class"><pre class="language-java"><code>   <span class="token comment">//ViewController</span>
   <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">ViewDecorator</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">visitDecorator</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> target<span class="token punctuation">,</span> <span class="token class-name">DecorateVisitor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> visitor<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params<span class="token punctuation">,</span> <span class="token class-name">DecorateVisitCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>   controller<span class="token punctuation">.</span><span class="token function">visitDecorator</span><span class="token punctuation">(</span><span class="token class-name">VersionCompareDecorator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
   				<span class="token punctuation">(</span>decorator<span class="token punctuation">,</span> params<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> decorator<span class="token punctuation">.</span><span class="token function">versionCompare</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">SqlEntity</span><span class="token punctuation">)</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">SqlEntity</span><span class="token punctuation">)</span> params<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   				<span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> compareEntity<span class="token punctuation">,</span> comparedEntity <span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p><code>target</code>: Java class of the decorator. For example: <code>VersionCompareDecorator</code>.</p></li> <li><p><code>visitor</code>: Event interface class implemented <code>DecorateVisitor</code>.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>     <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DecorateVisitor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
     	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">T</span> decorator<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
</code></pre></div><ul><li><p><code>params</code>: Used to pass the parameters needed in <code>DecorateVisitor</code>.</p></li> <li><p><code>callback</code>: Defined the function implemented <code>DecorateVisitCallback</code>. Used to analysis the return value from <code>DecorateVisitor</code> and decided if other decorators should be run. If <code>false</code>, other decorators will not be notified.</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>     <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DecorateVisitCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
     	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">visited</span><span class="token punctuation">(</span><span class="token class-name">T</span> decorator<span class="token punctuation">,</span> <span class="token class-name">Object</span> returnObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
</code></pre></div><h4 id="use-of-decorator-in-extension-prospect"><a href="#use-of-decorator-in-extension-prospect" class="header-anchor">#</a> Use of Decorator in Extension Prospect</h4> <p>Developers must implement the existing decorator to use its features.</p> <ul><li>Decorator can be a standalone Java class</li> <li>Decorator can be a Java Bean</li> <li>Decorator can be a View Listener</li></ul> <p>Decorators must be registered in order to work properly:</p> <ul><li><p>As Java Bean and ViewListener already registered, no action need to be done if the decorator is a Java Bean or a ViewListener.</p></li> <li><p>If decorator is a Java class, follow the steps to register:</p> <ol><li><p>Register using tag <code>&lt;caw:viewDecorator class=&quot;className&quot;/&gt;</code> in <code>XHTML</code>.</p></li> <li><p>Register using tag <code>&lt;caw:viewDecorator value=&quot;#{returnDecorator()}&quot;</code> in <code>XHTML</code>.</p></li> <li><p>Register in <code>initialized</code> in ViewListener using the following snippet:</p></li></ol></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>     controller<span class="token punctuation">.</span><span class="token function">addViewDecorator</span><span class="token punctuation">(</span>myDecorator<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="create-a-new-component"><a href="#create-a-new-component" class="header-anchor">#</a> Create a New Component</h2> <p>If the new component need to include the features in aiM18, please read to the following information.</p> <h3 id="support-udf-mess"><a href="#support-udf-mess" class="header-anchor">#</a> Support UDF Mess</h3> <p>Add an attribute <code>data-mess</code> to the component, <code>value</code> of the attribute should be the <code>messCode</code> of the component.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">data-mess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Employee<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Users can right click the above <code>label</code> component and adjust the mess after <code>UDF Mess</code> is enabled.</p> <h3 id="support-locator"><a href="#support-locator" class="header-anchor">#</a> Support Locator</h3> <p>If back-end returns error messages includes locators, front-end will base on the locator information and hightlight the component(s).
当后台的错误消息，包含组件定位时，前端会根据组件定位信息，找到相应组件，并处罚“高亮”事件。</p> <p>Locator grouped <code>tableName</code>, <code>columnName</code> and <code>rowId</code> to form <code>tableName.columnName.rowId</code>.</p> <ul><li>If module:table is 1:1, locator information will be <code>tableName.columnName</code>.</li> <li>If module:table is 1:N, locator information will be <code>tableName.columnName.rowId</code>.</li> <li>If locator refering a table, locator information will be <code>tableName</code>.</li></ul> <p>The component must defined its &quot;Locator Information&quot; in the attribute <code>data-locator</code> in the outermost layer (e.g. div). If back-end returns a message with locator information, the component will be highlighted.</p> <p>In <code>JavaScript</code>, we can use the following snippet to handle the hightlight functions:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#componentId'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'highlight'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> locator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>highlight<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Type of highlight. Options: `message`, `versionCompare`.</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Status of hightlight. `on` means highlighted; `off` means not hightlighted.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="support-udf-functions"><a href="#support-udf-functions" class="header-anchor">#</a> Support UDF Functions</h3> <p>aiM18 has the following UDF functions:</p> <ul><li>UDF Layout</li> <li>UDF Fields</li> <li>UDF Attributes</li></ul> <p><strong>UDF Layout</strong> is already implemented in all Editor.</p> <p>If new components need to support <strong>UDF Fields</strong> and <strong>UDF Attributes</strong>, you may refer to following guidelines.</p> <h4 id="support-udf-fields"><a href="#support-udf-fields" class="header-anchor">#</a> Support UDF Fields</h4> <p>Configure the <code>faces.xml</code> to declare which types of fields need to be supported.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-config</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>faces-library</span> <span class="token attr-name">ns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.cloud-at-work.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>faces.lib.caw<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>udfSupport</span> <span class="token attr-name">udfType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>faces-library</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>From the above example, <code>&lt;udfSupport&gt;</code> is used to declare <code>inputText</code> should be supported in UDF Fields like a <code>String</code>.</p> <p>Types of UDF Fields:
<code>string</code>, <code>text</code>, <code>number</code>, <code>date</code>, <code>boolean</code>, <code>color</code>, <code>image</code>, <code>combo</code>, <code>lookup</code></p> <h4 id="support-udf-attributes"><a href="#support-udf-attributes" class="header-anchor">#</a> Support UDF Attributes</h4> <p>Configurate the <code>faces.xml</code> to declare which attributes need to be supported.</p> <p><strong>Example</strong>:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>udfSupport</span> <span class="token attr-name">udfType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> 
              <span class="token attr-name">helper</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.udf.InputTextHelper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>320<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mess-label<span class="token punctuation">&quot;</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>labelMess<span class="token punctuation">&quot;</span></span> <span class="token attr-name">editor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mess<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      faces.caw.faces.label
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mess-info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">editor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mess<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      faces.caw.faces.info
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>markedRequired<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Boolean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>colReq<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      faces.caw.faces.required
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>readonly<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Boolean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">editable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      faces.caw.faces.readonly
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxlength<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Integer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textLength<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      faces.caw.faces.length
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>udfSupport</span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>&lt;attribute&gt;</code> is used to declare the attribute information.
<strong>Attributes</strong>:</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td>Attribute name.</td></tr> <tr><td>type</td> <td>Attribute type. Options: <code>Byte</code>, <code>Boolean</code>, <code>Character</code>, <code>Short</code>, <code>Integer</code>, <code>Long</code>, <code>Float</code>, <code>Double</code>, <code>String</code></td></tr> <tr><td>default</td> <td>Default value</td></tr> <tr><td>source</td> <td>Defined the fields in which the value will be used. Options: <code>code</code>, <code>desc</code>, <code>colType</code>, <code>labelMess</code>, <code>colReq</code>, <code>textLength</code>, <code>numPoint</code>, <code>numDecimal</code>, <code>searchTypeId</code>, <code>stSearchType</code>.</td></tr> <tr><td>editor</td> <td>Define the value type of the attribute. Option: <code>css</code>, <code>mess</code> (Only valid when <code>type</code> = <code>String</code>)</td></tr> <tr><td>visitable</td> <td>Indicate if the attribute should be shown in the setting editor.</td></tr> <tr><td>editable</td> <td>Indicate if the attribute can be edited in the setting editor.</td></tr> <tr><td>tip</td> <td>Define the tooltip. Type: <code>messCode</code></td></tr> <tr><td>option</td> <td>Define the <code>pattern</code> if the value of the attribute can be chosen in a drop down menu.</td></tr> <tr><td>src</td> <td>Define a JSF view for the attribute setting.</td></tr> <tr><td>required</td> <td>Indicate if the attribute is required.</td></tr></tbody></table> <h4 id="setting-for-component"><a href="#setting-for-component" class="header-anchor">#</a> Setting for Component</h4> <p>If developers want to create an additional setting page for the component, please refer to the following guidelines:</p> <ol><li>Define setting JSF view in <code>settingUrl</code></li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>udfSupport</span> <span class="token attr-name">udfType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">settingUrl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/view/dialog/myConfig.xhtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     ...
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>udfSupport</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>Pass parameters to the setting</li></ol> <p>Setting will pop up as a dialog, <code>attributes</code>, a <code>Map&lt;String, Object&gt;</code> storing all the attributes' values, will be passed to the setting page.</p> <ol start="3"><li>Return value from the setting</li></ol> <p>The new <code>Map&lt;String, Object&gt;</code> must be return back when the dialog is closed.</p> <h4 id="how-to-use-the-udf-attribute-in-component"><a href="#how-to-use-the-udf-attribute-in-component" class="header-anchor">#</a> How To Use the UDF Attribute In Component</h4> <ul><li>If the attribute already exists in the component, no work need to be done.</li> <li>If the attribute is new to the component, an <code>UdfHelper</code> need to be created.</li></ul> <p>To create an <code>UdfHelper</code>:</p> <ol><li><p>Define a Java class which extend <code>UdfHelper</code>.</p></li> <li><p>Declare the attribute <code>helper</code> in <code>&lt;udfSupport&gt;</code>.</p></li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>udfSupport</span> <span class="token attr-name">udfType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span>
               <span class="token attr-name">helper</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.multiable.web.udf.InputTextHelper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     ...
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>udfSupport</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>Override two methods in <code>UdfHelper</code>.</li></ol> <div class="language-java extra-class"><pre class="language-java"><code>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">applyTag</span><span class="token punctuation">(</span><span class="token class-name">FaceletContext</span> ctx<span class="token punctuation">,</span> <span class="token class-name">UIComponent</span> component<span class="token punctuation">,</span> <span class="token class-name">Tag</span> tag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">TagAttribute</span> attribute <span class="token operator">=</span> tag<span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;myProp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token class-name">String</span> attrValue <span class="token operator">=</span> attribute<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       component<span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token char">'style'</span><span class="token punctuation">,</span> attrValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
</code></pre></div><p>In this method, all the component's attributes are stored inside <code>tag</code>. Get the non-supported UDF attributes by using the key <code>myProp</code> and  handle it.</p> <div class="language-java extra-class"><pre class="language-java"><code>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">applyAttribute</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">UIComponent</span> component<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> attributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token class-name">String</span> attrValue <span class="token operator">=</span> attributes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token char">'myProp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      component<span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token char">'style'</span><span class="token punctuation">,</span> attrValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
</code></pre></div><p>In this method, all the component's attributes are stored inside <code>attributes</code>, handle <code>myProp</code> in the same way.</p> <h2 id="special-components-features"><a href="#special-components-features" class="header-anchor">#</a> Special Components/Features</h2> <h3 id="module-wizard"><a href="#module-wizard" class="header-anchor">#</a> Module Wizard</h3> <p>Module Wizard is a group of modules displayed to users one by one such that users can finish a list of complicated modifications using the wizard.</p> <p>Two main elements in module wizard:</p> <ul><li>key： Unique key</li> <li>path: Wizard view file</li></ul> <h4 id="enable-wizard"><a href="#enable-wizard" class="header-anchor">#</a> Enable Wizard</h4> <ul><li>Enable wizard using Java</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">startGuide</span><span class="token punctuation">(</span><span class="token string">&quot;udfEditor&quot;</span><span class="token punctuation">,</span> '<span class="token operator">/</span>view<span class="token operator">/</span>frame<span class="token operator">/</span>udfEditorGuide<span class="token punctuation">.</span>xhtml'<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Enable wizard using JavaScript</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  top<span class="token punctuation">.</span>myApp<span class="token punctuation">.</span><span class="token function">startGuide</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'udfEditor'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/view/frame/udfEditorGuide.xhtml'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="create-a-wizard"><a href="#create-a-wizard" class="header-anchor">#</a> Create a Wizard</h4> <p>Wizard view follows the normal rules of writing a JSF view.</p> <p>In wizard view, <code>&lt;caw:frameWizard&gt;</code> is used to define the content of wizard.</p> <p><strong>Example</strong>：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>beanDeclare</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ueGuide<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>beanDeclare</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">h:</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameWizard</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wizard<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>height: 100%;<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">completeValidator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.validateComplete}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">f:</span>facet</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>start<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	 <span class="token comment">&lt;!--Start View--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">f:</span>facet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">f:</span>facet</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>end<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--End View--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">f:</span>facet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">f:</span>facet</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--Message Display--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">f:</span>facet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameStep</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udfEditor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">menuCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udfEditor<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.getStepListener(0)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--Step 1 View--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameStep</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameStep</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udfMenu<span class="token punctuation">&quot;</span></span> <span class="token attr-name">menuCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udfMenu<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.getStepListener(1)}<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">validator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.validateStep}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--Step 2 View--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameStep</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameStep</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>moduleFuncSetting<span class="token punctuation">&quot;</span></span> <span class="token attr-name">menuCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>moduleFuncSetting<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">listener</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.getStepListener(2)}<span class="token punctuation">&quot;</span></span>  
                   <span class="token attr-name">validator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{ueGuide.validateStep}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   	  <span class="token comment">&lt;!--Step 3 View--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameStep</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameWizard</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">h:</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>Attributes</strong></p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>completeValidator</td> <td><code>EL Expression</code>. Determine if the step is completed with no error.</td></tr> <tr><td>onChange</td> <td>Triggered when step changed.</td></tr> <tr><td>onComplete</td> <td>Triggered when all steps completed.</td></tr></tbody></table> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameWizard</span> <span class="token attr-name">completeValidator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxBean.validateComplete<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">onChange</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxBean.onWizardChange<span class="token punctuation">&quot;</span></span>
                 <span class="token attr-name">onComplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxBean.onWizardComplete<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameWizard</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//xxBean.java</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">validateComplete</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">UIComponent</span> component<span class="token punctuation">,</span> <span class="token class-name">FrameWizardCompleteEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">setValid</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Indicate the wizard is not completed.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onWizardChange</span><span class="token punctuation">(</span><span class="token class-name">FrameWizardChangeEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onWizardComplete</span><span class="token punctuation">(</span><span class="token class-name">FrameWizardCompleteEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong><code>&lt;caw:frameStep</code></strong> used to define the information about a step.
<strong>Attributes</strong>:</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>menuCode</td> <td>Define the step' view.</td></tr> <tr><td>listener</td> <td>Define the step's <code>ViewListener</code></td></tr> <tr><td>params</td> <td>Define a <code>Map&lt;String, String&gt;</code> and pass to the view.</td></tr> <tr><td>validator</td> <td>Define a method to validate if it should be proceed to the next step. Use <code>event.setValid(false)</code> to prohibit the user to proceed.</td></tr></tbody></table> <p><strong><code>validator</code></strong> <strong>Example</strong>:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>frameStep</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>step1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">validator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxBean.validateStep<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>frameStep</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//xxBean</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">validateStep</span><span class="token punctuation">(</span><span class="token class-name">FacesContext</span> context<span class="token punctuation">,</span> <span class="token class-name">UIComponent</span> component<span class="token punctuation">,</span> <span class="token class-name">FrameWizardChagneEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> step <span class="token operator">=</span> component<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;step1&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">setValid</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Customize <code>facets</code></strong></p> <p>Define views for <code>frameWizard</code> in <code>facets</code>:</p> <table><thead><tr><th><code>facets</code> Name</th> <th>Description</th></tr></thead> <tbody><tr><td>start</td> <td>Define a start view</td></tr> <tr><td>end</td> <td>Define an end view</td></tr> <tr><td>message</td> <td>Define a message view</td></tr></tbody></table> <h3 id="progress-bar"><a href="#progress-bar" class="header-anchor">#</a> Progress Bar</h3> <h4 id="introduction-8"><a href="#introduction-8" class="header-anchor">#</a> Introduction</h4> <p>Progress bar is a feature that display a bar in the user interface showing the progress of the process.</p> <h4 id="create-destory"><a href="#create-destory" class="header-anchor">#</a> Create &amp; Destory</h4> <p>Create and destory of a progress bar can only be done in JavaScript.</p> <h5 id="create-default-progress-bar"><a href="#create-default-progress-bar" class="header-anchor">#</a> Create Default Progress Bar</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> progressBar <span class="token operator">=</span> myView<span class="token punctuation">.</span><span class="token function">createProgressbar</span><span class="token punctuation">(</span><span class="token string">'batchDelete'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">colorStyle</span><span class="token operator">:</span> <span class="token string">'primary'</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">interruptable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">progress</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">startValue</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'progress.batchDelete'</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/progressbar.jpg" alt="progressbar"></p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>colorStyle</td> <td>Define the color style. Options: <code>primary</code>, <code>warning</code>, <code>info</code>, <code>danger</code>, <code>success。</code></td></tr> <tr><td>interruptable</td> <td>Indicate if it can be interrupted. Default: <code>false</code>.</td></tr> <tr><td>showBar</td> <td>Indicate if the bar should be shown. Default: <code>true</code>.</td></tr> <tr><td>showProgressText</td> <td>Indicate if percentage of the progress should be shown. Default: <code>true</code>.</td></tr> <tr><td>showDescription</td> <td>Indicate if description should be shown. Default: <code>true</code>.</td></tr> <tr><td>progress</td> <td>Setting for back-end. <code>startValue</code> define the starting percentage. <code>duration</code> define the maximum value can be reached in back-end. <code>description</code> define the description of the progress.</td></tr></tbody></table> <h5 id="create-udf-progress-bar"><a href="#create-udf-progress-bar" class="header-anchor">#</a> Create UDF Progress Bar</h5> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Define a progress bar interface and display it in the UI.</span>
<span class="token keyword">var</span> myProgressUI <span class="token operator">=</span> $<span class="token punctuation">(</span>'<span class="token generics"><span class="token punctuation">&lt;</span>div<span class="token punctuation">&gt;</span></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>'<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a progress bar object.</span>
<span class="token keyword">var</span> progress <span class="token operator">=</span> myView<span class="token punctuation">.</span><span class="token function">createProgress</span><span class="token punctuation">(</span>'myProgressBar'<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Listen for the action ready/update/end/destroy and update the UI.</span>
progress<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token char">'update'</span><span class="token punctuation">,</span> <span class="token function">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
  myProgressUI<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>progress <span class="token operator">+</span> <span class="token char">'%'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="enable-the-progress-bar"><a href="#enable-the-progress-bar" class="header-anchor">#</a> Enable the Progress Bar</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Default Progress Bar</span>
progressBar<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//action here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// UDF Progress Bar</span>
progress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Perform an action when the progress started.</p> <h5 id="destory-the-progress-bar"><a href="#destory-the-progress-bar" class="header-anchor">#</a> Destory the Progress Bar</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Destory the default progress bar</span>
progressBar<span class="token punctuation">.</span><span class="token function">destory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Destory the UDF progress bar</span>
progress<span class="token punctuation">.</span><span class="token function">destory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myProgressUI<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="update-the-progress-bar"><a href="#update-the-progress-bar" class="header-anchor">#</a> Update the Progress Bar</h4> <p><strong>Update in Front-end JavaScript</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">progress</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
  	<span class="token literal-property property">progressDescription</span><span class="token operator">:</span> <span class="token string">'description for current action'</span><span class="token punctuation">,</span>
  	<span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">''</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//Progress Object</span>
progress<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//ProgressBar Object (Default progress bar UI)</span>
progressBar<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Update in Back-end Java</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//ProgressUtil.java</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">updateProcess</span><span class="token punctuation">(</span><span class="token keyword">int</span> progressValue<span class="token punctuation">,</span> <span class="token class-name">String</span> progressDescription<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ProcessStatus</span> <span class="token function">updateProcessStatus</span><span class="token punctuation">(</span><span class="token keyword">int</span> progressValue<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token class-name">ProgressDescription</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Parameter <code>progressValue</code> define the current percentage of completion of the progress.</p> <p>Parameter <code>progressDescription</code> define the current description of the progress.</p> <hr> <p>Difference between <code>updateProcess</code> and<code>updateProcessStatus</code>:</p> <p><code>updateProcess</code> will check if the progress have been interrupted. If it is interrupted, system will thrown exception.</p> <p><code>updateProcessStatus</code> will not thrown exception. If the progress have been interrupted, it will not update the user interface.</p> <p><strong>Status of Progress Bar</strong>：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">ProcessStatus</span> <span class="token punctuation">{</span>
  <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token constant">INITIALIZED</span><span class="token punctuation">,</span> <span class="token constant">RUNNING</span><span class="token punctuation">,</span> <span class="token constant">COMPLETED</span><span class="token punctuation">,</span> <span class="token constant">INTERRUPTED</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="progress-bar-common-api"><a href="#progress-bar-common-api" class="header-anchor">#</a> Progress Bar Common API</h4> <ul><li>Check if the progress have been interrupted</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">checkInterruptStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//If interrupted, thrown exception.</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>； <span class="token comment">//If interrupted, will not thrown exception.</span>
</code></pre></div><ul><li>Create a New Child Progress Bar</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token comment">//Parameter： String key, String description, int startValue, int duration</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startProgressProcess</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startGroupProcess</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
</code></pre></div><p><code>key</code>: Unqiue key of the child progress bar.</p> <p><code>description</code>: Description of the child progress bar.</p> <p><code>startValue</code>: Start value of the child progress bar.</p> <p><code>duration</code>: The percentage used by the parent progress bar when the child progress bar exists.</p> <ul><li>Create a Child Progress Bar</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token comment">//Parameters： String key, String description, int startValue, int duration</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startWrappedProcess</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Example</strong>：</p> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mainTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startGroupProcess</span><span class="token punctuation">(</span><span class="token string">&quot;mainTask&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Main Task&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startWrappedProcess</span><span class="token punctuation">(</span><span class="token string">&quot;wrapTask&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Wrapped Task&quot;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">wrapTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">endProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">endProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">wrapTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startProgressProcess</span><span class="token punctuation">(</span><span class="token string">&quot;wrapTask&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Wrapped Task&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">updateProgress</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//mainTask progress percentage will become (40+20*50%=) 50%</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">endProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>Add Progress Description</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token comment">//Parameters： String key, String description</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startProgressProcess</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">startGroupProcess</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Description&quot;</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>Complete the Progress</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token class-name">ProgressUtil</span><span class="token punctuation">.</span><span class="token function">endProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="multilingual"><a href="#multilingual" class="header-anchor">#</a> Multilingual</h3> <p>aiM18 support multilingual. aiM18 provided 3 basic languages, they are English, Chinese(Traditional), Chinese(Simplified). User can define other language by using UDF Language.</p> <p>Developers can use mess tools to insert/update/delete the mess. Every mess records has one <code>messCode</code>, developers can use this <code>messCode</code> to retrieve the related text with different languages. All mess records can be retrieved in back-end Java class while JavaScript can only retrieve the mess with <code>webmess</code> = <code>true</code>.</p> <ul><li>Back-end Java can retrieve text by using <code>CawGlobal.getMess(&quot;messCode&quot;)</code>.</li> <li>Front-end JavaScript can retrieve text by using <code>myView.getMess('messCode')</code>.</li></ul> <p><strong>Language Change Event</strong></p> <p>When users change language, language change event will be triggered.</p> <ul><li>JavaScript Listen on Language Change Event</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>JsView<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">.</span><span class="token constant">BEFORE_LANGCHANGE</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//Do something before language changed</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>JsView<span class="token punctuation">.</span><span class="token constant">EVENT</span><span class="token punctuation">.</span><span class="token constant">AFTER_LANGCHANGE</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//Do something after language changed</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p>Java Listen on Language Change Event</p> <p>Use the method <code>actionPerformed</code> in <code>ViewListener</code>:</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">actionPerformed</span><span class="token punctuation">(</span><span class="token class-name">ViewActionEvent</span> vae<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">WebUtil</span><span class="token punctuation">.</span>langChangeCommand<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>vae<span class="token punctuation">.</span><span class="token function">getActionCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//do something</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="common-api-2"><a href="#common-api-2" class="header-anchor">#</a> Common API</h2> <h3 id="jsf-view-common-setting"><a href="#jsf-view-common-setting" class="header-anchor">#</a> JSF View Common Setting</h3> <h4 id="available-configuration-items"><a href="#available-configuration-items" class="header-anchor">#</a> Available Configuration Items</h4> <p><strong><code>&lt;caw:view&gt;</code> Setting</strong></p> <ul><li><code>readonly</code> and <code>disabled</code> attributes in <code>view</code></li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span> <span class="token attr-name">readonly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{expression}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{expression}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The above properties is used to unite the <code>readonly</code> and <code>disabled</code> properties of all components inside a view.</p> <ul><li><code>onConstruct</code> attribute</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span> <span class="token attr-name">onConstruct</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{method}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Method triggered when <code>ViewController</code> is created.</p> <ul><li><code>onDestroy</code> attribute</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span> <span class="token attr-name">onDestroy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{method}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Method triggered when view is destroyed.</p> <p><strong>Pass more parameters in Ajax request</strong></p> <p>Ajax request is sent based on <code>action</code> URL. If more information is needed  in the Ajax request, the following snippets will be helpful:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>actionPraram</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>paramName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>paramValue<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>paramValue</code> can be retrieved from <code>requestParam</code> everytime the Ajax request is sent.</p> <h4 id="common-function"><a href="#common-function" class="header-anchor">#</a> Common Function</h4> <ul><li>Get the text from <code>messCode</code>: <code>#{caw:mess('messCode')}</code></li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>#{caw:mess('messCode')}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>Get the component <code>id</code>: <code>#{caw:webID('id')}</code></li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>inputText</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>inputText</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">caw:</span>commandButton</span> <span class="token attr-name">update</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{caw:webID('textId')}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">caw:</span>commandButton</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>Get the system resource URL: <code>#{caw:resourceUrl('name', 'library')}</code></li></ul> <h3 id="java-common-front-end-api"><a href="#java-common-front-end-api" class="header-anchor">#</a> Java Common Front-end API</h3> <ul><li>Update component using <code>id</code>:</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Change the status of a component:</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">setDisabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;component1Id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;component2Id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Update the `disable` attribute</span>
  <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">setRendered</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;component1Id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;component2Id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Update the `render` attribute </span>
  <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">setVisible</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;component1Id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;component2Id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//Update the `visible` attribute</span>
</code></pre></div><blockquote><p><strong>Note</strong>：</p> <ul><li>Only available when the component has those attributes.</li> <li>The above snippet only change the value of the attributes, to apply the change in UI, update the user interface with <code>WebUitl.update(&quot;id&quot;)</code> is needed.</li> <li>To update the <code>rendered</code> attribute, parent component need to be updated.</li> <li>If developers already declare the value of <code>render</code> and <code>visible</code> to <code>false</code> in JSF view, changing the status in Java is not possible.</li> <li>If developers already declare the value of <code>disable</code> to <code>true</code> in JSF view, changing the status in Java is not possible.</li></ul></blockquote> <ul><li>Setting Focus:</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">focusComponent</span><span class="token punctuation">(</span><span class="token string">&quot;componentId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>Note</strong>：</p> <p>Focus in UI is affected by many factors including browser and user behavior, the above snippet does not guarantee it must focus on the target.</p> <p>Ususally used when the view is initialized。</p></blockquote> <ul><li>Pass parameters to Ajax's <code>oncomplete</code></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token class-name">FacesUtil</span><span class="token punctuation">.</span><span class="token function">getAssistant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addCallbackParam</span><span class="token punctuation">(</span><span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>  ajax<span class="token punctuation">.</span><span class="token function-variable function">oncomplete</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">xhr<span class="token punctuation">,</span> status<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>callback <span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//xxxxx</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>Finding Component:</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">findComponent</span><span class="token punctuation">(</span>'componentId'<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><ul><li><p>Utility Class</p> <p><code>WebUtil.java</code>: Common methods for font-end.</p> <p><code>MessageUtil.java</code>: Common methods for font-end messaging.</p> <p><code>SysAlertUtil.java</code>: Common methods for System Alert.</p></li></ul> <h3 id="javascript-common-api"><a href="#javascript-common-api" class="header-anchor">#</a> Javascript Common API</h3> <ul><li>Trigger action in ViewListener through JavaScript:</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  myView<span class="token punctuation">.</span><span class="token function">triggerAction</span><span class="token punctuation">(</span><span class="token string">'actionCommand'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>actionPerformed</code> in ViewListener will be triggered.</p> <ul><li>Trigger module actions(Save/Create/Read...) through JavaScript:</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  myFrame<span class="token punctuation">.</span><span class="token function">triggerAction</span><span class="token punctuation">(</span><span class="token string">'read'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Update component using JavaScript:</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  myView<span class="token punctuation">.</span><span class="token function">ajaxUpdate</span><span class="token punctuation">(</span><span class="token string">'componentId'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Getting mess using <code>messCode</code>:</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  myView<span class="token punctuation">.</span><span class="token function">getMess</span><span class="token punctuation">(</span><span class="token string">'messCode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// `webMess` = true</span>
</code></pre></div><ul><li>JavaScript common method can be found in <code>cawView.js</code>.</li></ul></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2025/05/29, 08:57:55</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/7488ac/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Overview</div></a> <a href="/pages/793dce/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Backend Framework</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/7488ac/" class="prev">Overview</a></span> <span class="next"><a href="/pages/793dce/">Backend Framework</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:m18ce02@multiable.com" title="Send Mail" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/m18ce01" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://www.multiable.com/" title="Home Page" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 1990-2025
    <span><a href="https://www.multiable.com/">Multiable</a> | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c0adcb3b.js" defer></script><script src="/assets/js/2.60d4b592.js" defer></script><script src="/assets/js/6.7349ea2a.js" defer></script>
  </body>
</html>
